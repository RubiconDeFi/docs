---
title: Api mã thông báo Rubicon | Bath
description: Tổng quan về các thực thể chính của bathtoken subgraph, trình xử lý sự kiện hợp đồng,
  và ví dụ truy vấn cho một loạt các trường hợp sử dụng.
---

# API BathToken

## **Các thực thể chính của BathToken**

Sơ đồ con BathToken chứa một tập hợp các thực thể thu thập và lưu trữ dữ liệu liên quan đến hoạt động của nhà cung cấp thanh khoản và việc sử dụng nhóm để tạo thị trường trên sổ đặt hàng của giao thức. Dưới đây là các thực thể chính mà chúng tôi tin rằng người dùng sẽ thấy phù hợp nhất với nhu cầu dữ liệu của họ.

### _**Thực thể cung cấp thanh khoản (ID: Địa chỉ ví)**_

```graphql
gõ LiquidityProvider @entity {
    " <user adddress> "
    tôi đã làm!
    "trường phái sinh"
    vị trí: [PoolPosition!]! @derivedFrom(trường: "liquidityProvider")
    tiền gửi: [Tiền gửi!]! @derivedFrom(trường: "liquidityProvider")
    rút tiền: [Rút tiền!]! @derivedFrom(trường: "liquidityProvider")
}
```

Thực thể LiquidityProvider hoạt động như một điểm tham chiếu duy nhất để thu thập tất cả hoạt động với nhóm thanh khoản Rubicon từ địa chỉ của ví. Từ bên trong một thực thể LiquidityProvider, bạn có thể truy cập các thực thể PoolPosition, Deposit và Withdraw.

### Thực thể _PoolPosition (ID: \<user address>#\<pool underlying asset address>)_

```graphql
gõ PoolPosition @entity {
    " <user address>#<pool underlying asset address>"
    tôi đã làm!
    " nhà cung cấp thanh khoản là "
    Nhà cung cấp thanh khoản: Nhà cung cấp thanh khoản!
    "hồ bơi là"
    hồ bơi: hồ bơi!
    " số dư bathToken hiện tại "
    bathTokenAmount: BigInt!
    " tổng giá trị tiền gửi nhóm "
    tổng tiền gửi: BigInt!
    " tổng giá trị của các lần rút nhóm "
    TotalWithdrawn: BigInt!
}
```

Thực thể PoolPosition đại diện cho trạng thái hoạt động của các khoản nắm giữ của người dùng trong nhóm thanh khoản Rubicon. Để truy cập trạng thái hiện tại của nhóm, bao gồm tổng khối lượng, số tiền chưa thanh toán và giá bathToken, thực thể Nhóm có thể được truy cập. Tất cả các giá trị được quy đổi theo giá trị số nguyên của mã thông báo ERC20 cơ bản mà chúng đại diện.

### Thực thể Pool (ID: \<pool underlying asset address>)

```graphql
gõ Pool @entity {
    " <pool underlying asset address> "
    tôi đã làm!
    " có nguồn gốc từ "
    Nhà tắm: Nhà tắm!
    "tên hồ bơi"
    Tên: Chuỗi!
    " địa chỉ tài sản nhóm "
    UnderToken: Chuỗi!
    " thời gian sáng tạo "
    đã tạoAtTimestamp: BigInt!
    " nhóm khối đã được tạo tại "
    đã tạoAtBlockNumber: BigInt!
    " địa chỉ của người tạo mã thông báo tắm "
    bathTokenCreator: Chuỗi!
    " số dư cơ sở nhóm (số tiền trong nhóm và trên sổ sách) "
    Cân bằng cơ bản: BigInt!
    " số lượng tài sản gộp chưa thanh toán trên sổ lệnh "
    số tiền chưa thanh toán: BigInt!
    " cổ phiếu đang lưu hành (BathTokens) "
    tokenSupply: BigInt!
    " tổng giá trị tiền gửi nhóm "
    tổng tiền gửi: BigInt!
    " tổng giá trị của các lần rút nhóm "
    TotalWithdrawn: BigInt!
    " Giá BathToken: tổng cung / số dư cơ sở "
    giá: BigDecimal!
    " tổng thu được từ hoạt động tạo lập thị trường "
    tổng thu nhập: BigInt!
    " ảnh chụp nhanh hàng ngày của dữ liệu nhóm "
    poolDayData: [PoolDayData!]! @derivedFrom(trường: "pool")
    " ảnh chụp nhanh hàng giờ của dữ liệu nhóm "
    poolHourData: [PoolHourData!]! @derivedFrom(trường: "pool")
    " trường dẫn xuất "
    tiền gửi: [Tiền gửi!]! @derivedFrom(trường: "pool")
    rút tiền: [Rút tiền!]! @derivedFrom(trường: "pool")
    PoolBuffers: [PoolBuffer!]! @derivedFrom(trường: "pool")
}
```

Thực thể Nhóm chứa tất cả thông tin liên quan về trạng thái hiện tại và lịch sử hoặc nhóm thanh khoản. Thực thể Nhóm ánh xạ tới nhiều thực thể khác được liên kết với. Các thực thể có liên quan nhất mà nó ánh xạ là các thực thể PoolDayData, PoolHourData và PoolBuffer. Biến totalEarned của thực thể Nhóm được tính như sau

$$
tổng số tiền kiếm được = số dư cơ bản - (totalDeposited - totalWithdrawn)
$$

Mọi thực thể Nhóm cũng có hai thực thể được liên kết theo dõi số liệu thống kê nhóm trong một khoảng thời gian đã đặt: PoolDayData & PoolHourData. ID của các cặp này như sau:

- PoolDayData(ID: \<pool underlying asset address>#\<timestamp rounded to current day by dividing by 86400>)
- PoolHourData(ID: \<pool underlying asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

Tất cả các giá trị được tính bằng giá trị số nguyên của mã thông báo ERC-20 cơ bản mà chúng đại diện.

### Thực thể PoolBuffer (ID: \<pool underlying asset address>#\<buffer asset address>)

```graphql
gõ PoolBuffer @entity {
    " <pool underlying asset address>#<buffer asset address>"
    tôi đã làm!
    "hồ bơi là"
    hồ bơi: hồ bơi!
    " địa chỉ mã thông báo của nội dung trong bộ đệm "
    mã thông báo: Chuỗi!
    " tên của tài sản trong bộ đệm "
    Tên: Chuỗi!
    " số lượng mã thông báo trong bộ đệm "
    bufferAmount: BigInt!
}
```

Thực thể PoolBuffer tương ứng với số lượng tài sản của một cặp chị em đang nằm trong nhóm thanh khoản đang chờ được cân bằng lại. Hình ảnh bên dưới sẽ giúp giải thích quy trình này và lượng Pool Buffer tương ứng với cái gì.

VIỆC CẦN LÀM: \*chèn hình ảnh từ bên trên\*

Mỗi thực thể PoolBuffer cũng có hai thực thể được liên kết theo dõi số liệu thống kê PoolBuffer trong một khoảng thời gian đã đặt: PoolDayData & PoolHourData. ID của các cặp này như sau:

- PoolBufferDay(ID: \<pool underlying asset address>#\<buffer asset address>#\<timestamp rounded to current day by dividing by 86400>)
- PoolBufferHour(ID: \<pool underlying asset address>#\<buffer asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

Tất cả các giá trị được tính bằng giá trị số nguyên của mã thông báo ERC-20 cơ bản mà chúng đại diện.

### Tổ chức ký gửi (ID: \<transaction hash>#\<user address>)

```graphql
gõ Tiền gửi @entity {
    " <transaction hash>#<user address>"
    tôi đã làm!
    "thời gian của txn"
    dấu thời gian: BigInt!
    " chi tiết giao dịch "
    giao dịch: Giao dịch!
    " pool để gửi vào "
    hồ bơi: hồ bơi!
    " số tiền gửi vào pool "
    số tiền gửi: BigInt!
    "Đã nhận được Bath Token"
    bathTokenAmount: BigInt!
    " Giá BathToken: tổng cung / số dư cơ sở "
    giá: BigDecimal!
    "nhà cung cấp thanh khoản"
    Nhà cung cấp thanh khoản: Nhà cung cấp thanh khoản!
    " ánh xạ tới thực thể PoolDayData "
    poolDayData: PoolDayData!
    " ánh xạ tới thực thể PoolHourData "
    poolHourData: PoolHourData!
}
```

Thực thể Tiền gửi tương ứng với bất kỳ khoản tiền gửi nào được đặt bởi nhà cung cấp thanh khoản vào nhóm Rubicon. Thực thể Tiền gửi chứa tất cả dữ liệu liên quan về khoản tiền gửi, chẳng hạn như số tiền gửi và cổ phần nhận được, cùng với ánh xạ tới các thực thể có liên quan khác. Tất cả các giá trị được quy đổi theo giá trị số nguyên của mã thông báo ERC20 cơ bản mà chúng đại diện.

### Đơn vị rút tiền (ID: \<transaction hash>#\<user address>)

```graphql
gõ Rút tiền @entity {
    " <transaction hash>#<user address>"
    tôi đã làm!
    "thời gian của txn"
    dấu thời gian: BigInt!
    " chi tiết giao dịch "
    giao dịch: Giao dịch!
    " pool để rút khỏi "
    hồ bơi: hồ bơi!
    " số tiền được rút từ pool "
    Số tiền rút: BigInt!
    "Thẻ tắm bị cháy"
    bathTokenBurned: BigInt!
    " Giá BathToken: tổng cung / số dư cơ sở "
    giá: BigDecimal!
    "nhà cung cấp thanh khoản"
    Nhà cung cấp thanh khoản: Nhà cung cấp thanh khoản!
    " ánh xạ tới thực thể PoolDayData "
    poolDayData: PoolDayData!
    " ánh xạ tới thực thể PoolHourData "
    poolHourData: PoolHourData!
}
```

Thực thể Rút tiền tương ứng với bất kỳ khoản tiền gửi nào được đặt bởi nhà cung cấp thanh khoản vào nhóm Rubicon. Thực thể Rút tiền chứa tất cả dữ liệu liên quan đến khoản tiền gửi, chẳng hạn như số tiền rút và cổ phần nhận được, cùng với ánh xạ tới các thực thể có liên quan khác. Tất cả các giá trị được quy đổi theo giá trị số nguyên của mã thông báo ERC20 cơ bản mà chúng đại diện.

## _**Truy vấn Ví dụ**_

Các truy vấn sau đây là một số trường hợp sử dụng phổ biến cho các nhu cầu dữ liệu tiềm năng liên quan đến sơ đồ con BathToken.

| Use Case                                               | Subgraph Studio Example                                                                                                                  |
| ------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------- |
| Access a User's liquidity pool positions               | [Pool Positions](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=liquidityProviders)                      |
| Check on the current statistics of the liquidity pools | [Current Pool Statistics](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools)                          |
| Load in the historical pools data                      | [Historical Pools Data](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools%20Historical%20Performance) |
