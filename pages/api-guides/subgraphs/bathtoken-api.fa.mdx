---
title: روبیکن | توکن حمام
description: یک مرور کلی از اشخاص کلیدی زیرگراف رمز حمام, گردانندگان رویداد قرارداد, و نمونه سوالات برای موارد مختلف استفاده.
---

# BathToken API

## ** موجودیت های کلیدی BathToken**

زیرگراف BathToken شامل مجموعه‌ای از نهادها است که داده‌های مربوط به فعالیت ارائه‌دهنده نقدینگی و استفاده از استخر را برای بازارسازی در دفترچه‌های سفارش پروتکل جمع‌آوری و ذخیره می‌کنند. در زیر نهادهای کلیدی وجود دارد که ما معتقدیم کاربران بیشترین ارتباط را با نیازهای داده خود پیدا خواهند کرد.

### _**شرکت ارائه دهنده Liquidity (شناسه: آدرس کیف پول)**_

```graphql
LiquidityProvider @entity {
    "<user adddress>"
    من کردم!
    "فیلدهای مشتق شده"
    موقعیت ها: [PoolPosition!]! @derivedFrom(فیلد: "liquidityProvider")
    سپرده ها: [سپرده!]! @derivedFrom(فیلد: "liquidityProvider")
    عقب نشینی می کند: [کناره گیری!]! @derivedFrom(فیلد: "liquidityProvider")
}
```

نهاد LiquidityProvider به عنوان یک نقطه مرجع برای جمع آوری تمام فعالیت ها با استخرهای نقدینگی Rubicon از آدرس کیف پول عمل می کند. از درون یک نهاد LiquidityProvider، می‌توانید به نهادهای PoolPosition، Deposit و Draw دسترسی داشته باشید.

### _PoolPosition Entity (ID: \<user address>#\<pool underlying asset address>)_

```graphql
PoolPosition @entity {
    " <user address>#<pool underlying asset address>"
    من کردم!
    "ارائه دهنده نقدینگی است"
    LiquidityProvider: LiquidityProvider!
    "استخر است"
    استخر: استخر!
    "موجودی فعلی bathToken"
    bathTokenAmount: BigInt!
    " ارزش کل سپرده های استخر "
    totalDeposited: BigInt!
    " ارزش کل برداشت های استخر "
    totalWithdrawn: BigInt!
}
```

موجودیت PoolPosition نشان دهنده وضعیت فعال دارایی های کاربر در استخر نقدینگی Rubicon است. برای دسترسی به وضعیت فعلی استخر، از جمله حجم کل، مبلغ معوقه، و قیمت bathToken، می توان به نهاد Pool دسترسی داشت. همه مقادیر به مقدار صحیح رمز ERC20 زیرینی که نشان می‌دهند مشخص می‌شوند.

### موجودیت استخر (شناسه: \<pool underlying asset address>)

```graphql
Pool @entity {
    "<pool underlying asset address>"
    من کردم!
    " ناشی شدن از "
    bathHouse: BathHouse!
    "نام استخر"
    نام: رشته
    "آدرس دارایی استخر"
    underlyingToken: رشته!
    "زمان ایجاد"
    createAtTimestamp: BigInt!
    "استخر بلوک در ایجاد شد"
    createAtBlockNumber: BigInt!
    آدرس سازنده ژتون حمام
    bathTokenCreator: رشته!
    موجودی موجود در استخر (مقدار در استخر و روی کتاب)
    underlyingBalance: BigInt!
    "مقدار دارایی های موجود در دفتر سفارش"
    outstandingAmount: BigInt!
    " سهام برجسته (BathTokens)"
    tokenSupply: BigInt!
    " ارزش کل سپرده های استخر "
    totalDeposited: BigInt!
    " ارزش کل برداشت های استخر "
    totalWithdrawn: BigInt!
    "قیمت BathToken: کل عرضه / موجودی اساسی"
    قیمت: BigDecimal!
    "کل به دست آمده از فعالیت های بازارسازی"
    totalEarned: BigInt!
    "عکس های فوری روزانه از داده های استخر"
    poolDayData: [PoolDayData!]! @derivedFrom(فیلد: "pool")
    "عکس های لحظه ای ساعتی از داده های استخر"
    poolHourData: [PoolHourData!]! @derivedFrom(فیلد: "pool")
    "فیلدهای مشتق شده"
    سپرده ها: [سپرده!]! @derivedFrom(فیلد: "pool")
    عقب نشینی می کند: [کناره گیری!]! @derivedFrom(فیلد: "pool")
    PoolBuffers: [PoolBuffer!]! @derivedFrom(فیلد: "pool")
}
```

واحد پول شامل تمام اطلاعات مربوط به وضعیت فعلی و تاریخی یا یک استخر نقدینگی است. موجودیت Pool به چندین موجودیت دیگر که با آن مرتبط است نگاشت می شود. مرتبط ترین موجودیت هایی که نقشه برداری می کند، موجودیت های PoolDayData، PoolHourData و PoolBuffer هستند. متغیر totalEarned موجودیت Pool به صورت زیر محاسبه می شود

$$
کل به دست آمده = موجودی اساسی - (کل سپرده گذاری شده - کل برداشته شده)
$$

هر موجودیت Pool همچنین دارای دو موجودیت مرتبط است که آمار استخر را در یک دوره زمانی مشخص ردیابی می‌کند: PoolDayData و PoolHourData. شناسه های این جفت به شرح زیر است:

* PoolDayData(ID: \<pool underlying asset address>#\<timestamp rounded to current day by dividing by 86400>)
* PoolHourData(ID: \<pool underlying asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

همه مقادیر به مقدار صحیح رمز ERC-20 زیرینی که آنها نشان می دهند تعیین می شوند.

### موجودیت PoolBuffer (ID: \<pool underlying asset address>#\<buffer asset address>)

```graphql
PoolBuffer @entity {
    " <pool underlying asset address>#<buffer asset address>"
    من کردم!
    "استخر است"
    استخر: استخر!
    "آدرس رمزی دارایی در بافر"
    نشانه: رشته!
    "نام دارایی در بافر"
    نام: رشته
    "مقدار توکن در بافر"
    bufferAmount: BigInt!
}
```

موجودیت PoolBuffer مربوط به مقدار یک زوج دارایی خواهر است که روی مخزن نقدینگی در انتظار تعادل مجدد است. تصویر زیر به توضیح این فرآیند و اینکه مقدار Pool Buffer مربوط به چه چیزی است کمک خواهد کرد.

TODO: \*تجسم را از بالا وارد کنید\*

هر موجودیت PoolBuffer همچنین دارای دو نهاد مرتبط است که آمار PoolBuffer را در یک بازه زمانی مشخص ردیابی می‌کند: PoolDayData و PoolHourData. شناسه های این جفت به شرح زیر است:

* PoolBufferDay(ID: \<pool underlying asset address>#\<buffer asset address>#\<timestamp rounded to current day by dividing by 86400>)
* PoolBufferHour(ID: \<pool underlying asset address>#\<buffer asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

همه مقادیر به مقدار صحیح رمز ERC-20 زیرینی که آنها نشان می دهند تعیین می شوند.

### نهاد سپرده (شناسه: \<transaction hash>#\<user address>)

```graphql
Deposit @entity {
    " <transaction hash>#<user address>"
    من کردم!
    "زمان txn"
    مهر زمانی: BigInt!
    "جزئیات معامله"
    معامله: معامله!
    "استخری برای سپرده گذاری در"
    استخر: استخر!
    "مبلغ واریز شده به استخر"
    مبلغ سپرده: BigInt!
    "توکن های حمام دریافت شد"
    bathTokenAmount: BigInt!
    "قیمت BathToken: کل عرضه / موجودی اساسی"
    قیمت: BigDecimal!
    «تامین کننده نقدینگی»
    LiquidityProvider: LiquidityProvider!
    "نقشه به موجودیت PoolDayData"
    poolDayData: PoolDayData!
    "نقشه به موجودیت PoolHourData"
    poolHourData: PoolHourData!
}
```

نهاد سپرده مربوط به هر سپرده ای است که توسط یک ارائه دهنده نقدینگی در استخرهای روبیکون قرار می گیرد. نهاد سپرده شامل کلیه داده های مربوط به سپرده، مانند مبلغ سپرده و سهام دریافتی، همراه با نقشه برداری برای سایر نهادهای مربوطه است. همه مقادیر به مقدار صحیح رمز ERC20 زیرینی که نشان می‌دهند مشخص می‌شوند.

### نهاد برداشت (شناسه: \<transaction hash>#\<user address>)

```graphql
برداشت @entity {
    " <transaction hash>#<user address>"
    من کردم!
    "زمان txn"
    مهر زمانی: BigInt!
    "جزئیات معامله"
    معامله: معامله!
    "استخری برای خروج از"
    استخر: استخر!
    "مبلغ برداشت شده از استخر"
    مبلغ برداشت: BigInt!
    "ژتون های حمام سوخته"
    bathTokenBurned: BigInt!
    "قیمت BathToken: کل عرضه / موجودی اساسی"
    قیمت: BigDecimal!
    «تامین کننده نقدینگی»
    LiquidityProvider: LiquidityProvider!
    "نقشه به موجودیت PoolDayData"
    poolDayData: PoolDayData!
    "نقشه به موجودیت PoolHourData"
    poolHourData: PoolHourData!
}
```

نهاد برداشت مربوط به هر سپرده ای است که توسط یک ارائه دهنده نقدینگی در استخرهای روبیکون قرار می گیرد. نهاد برداشت شامل تمام داده های مربوط به سپرده، مانند مبلغ برداشت و سهام دریافتی، همراه با نقشه برداری به سایر نهادهای مربوطه است. همه مقادیر به مقدار صحیح رمز ERC20 زیرینی که نشان می‌دهند مشخص می‌شوند.

## _**پرس و جوهای نمونه**_

پرس و جوهای زیر برخی از سناریوهای مورد استفاده رایج برای نیازهای داده بالقوه مربوط به زیرگراف BathToken هستند.

| Use Case                                               | Subgraph Studio Example                                                                                                                  |
| ------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------- |
| Access a User's liquidity pool positions               | [Pool Positions](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=liquidityProviders)                      |
| Check on the current statistics of the liquidity pools | [Current Pool Statistics](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools)                          |
| Load in the historical pools data                      | [Historical Pools Data](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools%20Historical%20Performance) |