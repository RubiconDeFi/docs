---
title: 루비콘/목욕 토큰
description: 목욕 토큰 하위 그래프의 주요 엔터티,계약 이벤트 처리기에 대한 개요, 그리고 다양한 사용 사례에 대한 예제 쿼리.
---

# 목욕토큰 API

## **BathToken 키 엔터티**

BathToken 하위 그래프에는 프로토콜의 주문서에서 시장 조성을 위한 유동성 공급자 활동 및 풀 활용과 관련된 데이터를 수집하고 저장하는 엔티티 모음이 포함되어 있습니다. 다음은 사용자가 자신의 데이터 요구 사항과 가장 관련이 있다고 생각하는 주요 엔터티입니다.

### _**LiquidityProvider Entity(ID: 지갑 주소)**_

```graphql
유형 LiquidityProvider @entity {
    " <user adddress> "
    아이디: 아이디!
    "파생 필드"
    위치: [PoolPosition!]! @derivedFrom(field: "liquidityProvider")
    입금: [입금!]! @derivedFrom(field: "liquidityProvider")
    철수: [철회!]! @derivedFrom(field: "liquidityProvider")
}
```

LiquidityProvider 엔터티는 지갑 주소에서 Rubicon 유동성 풀의 모든 활동을 수집하는 단일 참조 지점 역할을 합니다. LiquidityProvider 엔터티 내에서 PoolPosition, Deposit 및 Withdraw 엔터티에 액세스할 수 있습니다.

### _PoolPosition 엔터티(ID: \<user address>#\<pool underlying asset address>)_

```graphql
유형 PoolPosition @entity {
    " <user address>#<pool underlying asset address> "
    아이디: 아이디!
    " 유동성 공급자는 "
    유동성 제공자: 유동성 제공자!
    " 수영장은 "
    풀: 풀!
    " 현재 bathToken 잔액 "
    bathTokenAmount: BigInt!
    "풀 보증금의 총액"
    totalDeposited: BigInt!
    " 풀의 총 가치 인출 "
    총철회: BigInt!
}
```

PoolPosition 엔터티는 Rubicon 유동성 풀에서 사용자 보유 자산의 활성 상태를 나타냅니다. 총 볼륨, 미결제 금액 및 bathToken 가격을 포함하여 풀의 현재 상태에 액세스하려면 풀 엔티티에 액세스할 수 있습니다. 모든 값은 해당 값이 나타내는 기본 ERC20 토큰의 정수 값으로 표시됩니다.

### 풀 엔티티(ID: \<pool underlying asset address>)

```graphql
유형 풀 @엔티티 {
    " <pool underlying asset address> "
    아이디: 아이디!
    " 로부터 나오다 "
    목욕탕: 목욕탕!
    " 풀 이름 "
    이름: 스트링!
    " 풀 자산 주소 "
    기본 토큰: 문자열!
    " 생성 시간 "
    createdAtTimestamp: BigInt!
    " 블록 풀이 "에서 생성되었습니다.
    createdAtBlockNumber: BigInt!
    " 목욕 토큰 생성자의 주소 "
    bathTokenCreator: 문자열!
    " 풀 기본 잔액(풀 및 장부에 있는 금액) "
    기본 잔액: BigInt!
    " 오더북에 남아있는 풀 자산의 양 "
    뛰어난 금액: BigInt!
    " 발행주식수(BathTokens) "
    토큰 공급: BigInt!
    "풀 보증금의 총액"
    totalDeposited: BigInt!
    " 풀의 총 가치 인출 "
    총철회: BigInt!
    " BathToken 가격: 총 공급량 / 기본 잔액 "
    가격: BigDecimal!
    " 마켓 메이킹 활동으로 얻은 총액 "
    획득한 합계: BigInt!
    " 풀 데이터의 일일 스냅샷 "
    poolDayData: [풀데이데이터!]! @derivedFrom(필드: "풀")
    " 풀 데이터의 시간별 스냅샷 "
    poolHourData: [PoolHourData!]! @derivedFrom(필드: "풀")
    "파생 필드"
    입금: [입금!]! @derivedFrom(필드: "풀")
    철수: [철회!]! @derivedFrom(필드: "풀")
    풀버퍼: [풀버퍼!]! @derivedFrom(필드: "풀")
}
```

풀 엔터티에는 현재 및 과거 상태 또는 유동성 풀에 관한 모든 관련 정보가 포함되어 있습니다. 풀 엔터티는 연결된 여러 다른 엔터티에 매핑됩니다. 매핑하는 가장 관련성이 높은 엔터티는 PoolDayData, PoolHourData 및 PoolBuffer 엔터티입니다. Pool 엔터티의 totalEarned 변수는 다음과 같이 계산됩니다.

$$
totalEarned = basedBalance - (totalDeposited - totalWithdrawn)
$$

또한 모든 풀 엔터티에는 정해진 기간 동안 풀 통계를 추적하는 두 개의 연결된 엔터티인 PoolDayData 및 PoolHourData가 있습니다. 이 쌍의 ID는 다음과 같습니다.

* PoolDayData(ID: \<pool underlying asset address>#\<timestamp rounded to current day by dividing by 86400>)
* PoolHourData(ID: \<pool underlying asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

모든 값은 해당 값이 나타내는 기본 ERC-20 토큰의 정수 값으로 표시됩니다.

### PoolBuffer 엔터티(ID: \<pool underlying asset address>#\<buffer asset address>)

```graphql
유형 PoolBuffer @entity {
    " <pool underlying asset address>#<buffer asset address> "
    아이디: 아이디!
    "수영장은"
    풀: 풀!
    " 버퍼에 있는 자산의 토큰 주소 "
    토큰: 문자열!
    " 버퍼에 있는 자산 이름 "
    이름: 스트링!
    " 버퍼에 있는 토큰의 양 "
    버퍼 금액: BigInt!
}
```

PoolBuffer 엔터티는 재조정을 기다리는 유동성 풀에 있는 자매 쌍 자산의 양에 해당합니다. 아래 그림은 이 프로세스와 해당하는 풀 버퍼 양을 설명하는 데 도움이 됩니다.

TODO: \*위에서 시각화 삽입\*

모든 PoolBuffer 엔터티에는 정해진 기간 동안 PoolBuffer 통계를 추적하는 두 개의 관련 엔터티인 PoolDayData 및 PoolHourData도 있습니다. 이 쌍의 ID는 다음과 같습니다.

* PoolBufferDay(ID: \<pool underlying asset address>#\<buffer asset address>#\<timestamp rounded to current day by dividing by 86400>)
* PoolBufferHour(ID: \<pool underlying asset address>#\<buffer asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

모든 값은 해당 값이 나타내는 기본 ERC-20 토큰의 정수 값으로 표시됩니다.

### 입금 법인 (ID: \<transaction hash>#\<user address>)

```graphql
유형 입금 @entity {
    " <transaction hash>#<user address> "
    아이디: 아이디!
    "txn의 시간"
    타임스탬프: BigInt!
    " 상세 거래 내역 "
    트랜잭션: 트랜잭션!
    " 입금할 풀 "
    풀: 풀!
    " 풀에 입금된 금액 "
    예치금: BigInt!
    " 목욕 토큰을 받았습니다 "
    bathTokenAmount: BigInt!
    " BathToken 가격: 총 공급량 / 기본 잔액 "
    가격: BigDecimal!
    " 유동성 공급자 "
    유동성 제공자: 유동성 제공자!
    " PoolDayData 엔터티에 매핑 "
    poolDayData: 풀데이데이터!
    " PoolHourData 엔터티에 매핑 "
    poolHourData: PoolHourData!
}
```

예금 개체는 유동성 공급자가 Rubicon 풀에 넣은 모든 예금에 해당합니다. 예금 엔터티에는 다른 관련 엔터티에 대한 매핑과 함께 입금액 및 받은 주식과 같은 예금과 관련된 모든 관련 데이터가 포함되어 있습니다. 모든 값은 해당 값이 나타내는 기본 ERC20 토큰의 정수 값으로 표시됩니다.

### 인출 엔티티 (ID: \<transaction hash>#\<user address>)

```graphql
유형 철회 @entity {
    " <transaction hash>#<user address> "
    아이디: 아이디!
    "txn의 시간"
    타임스탬프: BigInt!
    " 상세 거래 내역 "
    트랜잭션: 트랜잭션!
    " 인출할 풀 "
    풀: 풀!
    " 풀에서 인출된 금액 "
    인출 금액: BigInt!
    " 목욕 토큰 소진 "
    bathTokenBurned: BigInt!
    " BathToken 가격: 총 공급량 / 기본 잔액 "
    가격: BigDecimal!
    " 유동성 공급자 "
    유동성 제공자: 유동성 제공자!
    " PoolDayData 엔터티에 매핑 "
    poolDayData: 풀데이데이터!
    " PoolHourData 엔터티에 매핑 "
    poolHourData: PoolHourData!
}
```

인출 엔터티는 유동성 공급자가 Rubicon 풀에 넣은 모든 예치금에 해당합니다. 인출 엔터티에는 다른 관련 엔터티에 대한 매핑과 함께 인출 금액 및 받은 주식과 같은 예금과 관련된 모든 관련 데이터가 포함되어 있습니다. 모든 값은 해당 값이 나타내는 기본 ERC20 토큰의 정수 값으로 표시됩니다.

## _**예제 검색어**_

다음 쿼리는 BathToken 하위 그래프와 관련된 잠재적인 데이터 요구 사항에 대한 몇 가지 일반적인 사용 사례 시나리오입니다.

| Use Case                                               | Subgraph Studio Example                                                                                                                  |
| ------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------- |
| Access a User's liquidity pool positions               | [Pool Positions](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=liquidityProviders)                      |
| Check on the current statistics of the liquidity pools | [Current Pool Statistics](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools)                          |
| Load in the historical pools data                      | [Historical Pools Data](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools%20Historical%20Performance) |