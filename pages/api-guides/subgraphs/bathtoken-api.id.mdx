---
title: Rubicon | Bath Token API
description: Gambaran umum entitas utama subgraf Token Bath, penangan peristiwa kontrak, dan contoh kueri untuk berbagai kasus penggunaan.
---

# BathToken API

## **Entitas Kunci BathToken**

Subgraf BathToken berisi kumpulan entitas yang mengumpulkan dan menyimpan data yang terkait dengan aktivitas penyedia likuiditas dan pemanfaatan kumpulan untuk pembuatan pasar pada buku pesanan protokol. Di bawah ini adalah entitas utama yang menurut kami paling relevan bagi pengguna dengan kebutuhan data mereka.

### _**Entitas Penyedia Likuiditas (ID: Alamat Dompet)**_

``` graphql
ketik LiquidityProvider @entity {
    " <user adddress> "
    ya!
    "bidang turunan"
    posisi: [PoolPosition!]! @derivedFrom(bidang: "liquidityProvider")
    deposit: [Deposit!]! @derivedFrom(bidang: "liquidityProvider")
    menarik: [Tarik!]! @derivedFrom(bidang: "liquidityProvider")
}
```

Entitas LiquidityProvider bertindak sebagai satu titik referensi untuk mengumpulkan semua aktivitas dengan kumpulan likuiditas Rubicon dari alamat dompet. Dari dalam entitas LiquidityProvider, Anda dapat mengakses entitas PoolPosition, Deposit, dan Withdraw.

### _PoolPosition Entitas (ID: \<user address>#\<pool underlying asset address>)_

``` graphql
ketik PoolPosition @entity {
    " <user address>#<pool underlying asset address> "
    ya!
    " penyedia likuiditas adalah "
    Penyedia likuiditas: Penyedia Likuiditas!
    "kolam itu"
    kolam renang: Kolam renang!
    " saldo bathToken saat ini "
    bathTokenAmount: BigInt!
    " total nilai deposit pool "
    totalDeposited: BigInt!
    " total nilai penarikan pool "
    totalDitarik: BigInt!
}
```

Entitas PoolPosition merepresentasikan status aktif kepemilikan pengguna di kumpulan likuiditas Rubicon. Untuk mengakses keadaan pool saat ini, termasuk volume total, jumlah terutang, dan harga bathToken, entitas Pool dapat diakses. Semua nilai didenominasi dalam nilai integer dari token ERC20 yang mendasarinya yang diwakilinya.

### Entitas Pangkalan (ID: \<pool underlying asset address>)

``` graphql
ketik Kumpulan @entitas {
    " <pool underlying asset address> "
    ya!
    " berasal dari "
    Rumah Mandi: Rumah Mandi!
    "nama kolam"
    nama: Tali!
    "alamat kumpulan aset"
    underToken: Tali!
    " Waktu penciptaan "
    dibuat di Timestamp: BigInt!
    "blok pool dibuat di"
    dibuatAtBlockNumber: BigInt!
    "alamat pembuat bath token"
    bathTokenCreator: Tali!
    " pool underlying balance (jumlah dalam pool dan di buku) "
    underlyingBalance: BigInt!
    " jumlah kumpulan aset yang beredar di buku pesanan "
    outstandingAmount: BigInt!
    " saham beredar (BathTokens) "
    tokenSupply: BigInt!
    " total nilai deposit pool "
    totalDeposited: BigInt!
    " total nilai penarikan pool "
    totalDitarik: BigInt!
    "Harga BathToken: total pasokan / saldo pokok"
    harga: BigDecimal!
    " total yang diperoleh dari aktivitas market making "
    totalEarned: BigInt!
    "snapshot harian data kumpulan"
    poolDayData: [PoolDayData!]! @derivedFrom(bidang: "kumpulan")
    "snapshot per jam dari data kumpulan"
    poolHourData: [PoolHourData!]! @derivedFrom(bidang: "kumpulan")
    "bidang turunan"
    deposit: [Deposit!]! @derivedFrom(bidang: "kumpulan")
    menarik: [Tarik!]! @derivedFrom(bidang: "kumpulan")
    PoolBuffer: [PoolBuffer!]! @derivedFrom(bidang: "kumpulan")
}
```

Entitas Pool berisi semua informasi yang relevan mengenai keadaan saat ini dan historis, atau pool likuiditas. Entitas Pool memetakan ke beberapa entitas lain yang terkait dengannya. Entitas paling relevan yang dipetakannya adalah entitas PoolDayData, PoolHourData, dan PoolBuffer. Variabel totalEarned dari entitas Pool dihitung sebagai berikut

$$
totalEarned = underlyingBalance - (totalDeposited - totalWithdrawn)
$$

Setiap entitas Pangkalan juga memiliki dua entitas terkait yang melacak statistik Pangkalan selama jangka waktu tertentu: PoolDayData & PoolHourData. ID untuk pasangan ini adalah sebagai berikut:

* PoolDayData(ID: \<pool underlying asset address>#\<timestamp rounded to current day by dividing by 86400>)
* PoolHourData(ID: \<pool underlying asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

Semua nilai didenominasi dalam nilai bilangan bulat dari token ERC-20 yang mendasari yang diwakilinya.

### Entitas PoolBuffer (ID: \<pool underlying asset address>#\<buffer asset address>)

``` graphql
ketik PoolBuffer @entitas {
    " <pool underlying asset address>#<buffer asset address> "
    ya!
    "kolam itu"
    kolam renang: Kolam renang!
    " alamat token aset dalam buffer "
    tanda: Tali!
    "nama aset dalam buffer"
    nama: Tali!
    "jumlah token dalam buffer"
    bufferAmount: BigInt!
}
```

Entitas PoolBuffer sesuai dengan jumlah aset pasangan kembar yang duduk di kumpulan likuiditas menunggu untuk diseimbangkan kembali. Visual di bawah ini akan membantu menjelaskan proses ini dan sesuai dengan jumlah Pool Buffer.

TODO: \*sisipkan visualisasi dari atas\*

Setiap entitas PoolBuffer juga memiliki dua entitas terkait yang melacak statistik PoolBuffer selama periode waktu tertentu: PoolDayData & PoolHourData. ID untuk pasangan ini adalah sebagai berikut:

* PoolBufferDay(ID: \<pool underlying asset address>#\<buffer asset address>#\<timestamp rounded to current day by dividing by 86400>)
* PoolBufferHour(ID: \<pool underlying asset address>#\<buffer asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

Semua nilai didenominasi dalam nilai bilangan bulat dari token ERC-20 yang mendasari yang diwakilinya.

### Entitas Penyetoran (ID: \<transaction hash>#\<user address>)

``` graphql
ketik Setoran @entitas {
    " <transaction hash>#<user address> "
    ya!
    "waktu txn"
    cap waktu: BigInt!
    " Detil transaksi "
    transaksi: Transaksi!
    "kolam untuk deposit"
    kolam renang: Kolam renang!
    " jumlah yang disetorkan ke dalam kumpulan "
    depositAmount: BigInt!
    "Token Mandi diterima"
    bathTokenAmount: BigInt!
    "Harga BathToken: total pasokan / saldo pokok"
    harga: BigDecimal!
    "penyedia likuiditas"
    Penyedia likuiditas: Penyedia Likuiditas!
    "petakan ke entitas PoolDayData"
    poolDayData: PoolDayData!
    "petakan ke entitas PoolHourData"
    poolHourData: PoolHourData!
}
```

Entitas Deposit sesuai dengan setiap deposit yang ditempatkan oleh penyedia likuiditas ke dalam kumpulan Rubicon. Entitas Deposit berisi semua data yang relevan mengenai deposit, seperti jumlah deposit dan saham yang diterima, bersama dengan pemetaan ke entitas lain yang relevan. Semua nilai didenominasi dalam nilai integer dari token ERC20 yang mendasarinya yang diwakilinya.

### Penarikan Entitas (ID: \<transaction hash>#\<user address>)

``` graphql
ketik Tarik @entitas {
    " <transaction hash>#<user address> "
    ya!
    "waktu txn"
    cap waktu: BigInt!
    " Detil transaksi "
    transaksi: Transaksi!
    "kolam untuk menarik diri dari"
    kolam renang: Kolam renang!
    " jumlah yang ditarik dari pool "
    jumlah penarikan: BigInt!
    "Token Mandi dibakar"
    bathTokenBurned: BigInt!
    "Harga BathToken: total pasokan / saldo pokok"
    harga: BigDecimal!
    "penyedia likuiditas"
    Penyedia likuiditas: Penyedia Likuiditas!
    "petakan ke entitas PoolDayData"
    poolDayData: PoolDayData!
    "petakan ke entitas PoolHourData"
    poolHourData: PoolHourData!
}
```

Entitas Penarikan sesuai dengan setoran apa pun yang ditempatkan oleh penyedia likuiditas ke dalam kumpulan Rubicon. Entitas Penarikan berisi semua data yang relevan mengenai setoran, seperti jumlah penarikan dan saham yang diterima, bersama dengan pemetaan ke entitas terkait lainnya. Semua nilai didenominasi dalam nilai integer dari token ERC20 yang mendasarinya yang diwakilinya.

## _**Kueri Contoh**_

Kueri berikut adalah beberapa skenario kasus penggunaan umum untuk kebutuhan data potensial yang berkaitan dengan subgraf BathToken.

| Use Case                                               | Subgraph Studio Example                                                                                                                  |
| ------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------- |
| Access a User's liquidity pool positions               | [Pool Positions](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=liquidityProviders)                      |
| Check on the current statistics of the liquidity pools | [Current Pool Statistics](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools)                          |
| Load in the historical pools data                      | [Historical Pools Data](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools%20Historical%20Performance) |