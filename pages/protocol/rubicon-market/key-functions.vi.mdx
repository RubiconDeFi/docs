---
title: Rubicon | Chức Năng Chính Thị Trường
pageTitle: Các Chức Năng Chính Của Thị Trường
description: Các điểm vào và chức năng chính của Hợp đồng Thị Trường Rubicon
---

## Chức năng chính

#### Lời đề nghị

```
function offer(uint pay_amt, ERC20 pay_gem, uint buy_amt, ERC20 buy_gem, uint pos)
    public returns (uint)
```

Chức năng **offer** là chức năng chính để đặt lệnh mua giới hạn hoặc bán giới hạn mới trên thị trường Rubicon. Chức năng này lấy tiền của người dùng cho một _ERC-20 pair_ nhất định và đặt chúng vào sổ đặt hàng của hợp đồng thông minh. Khi một người dùng khác chọn mua đơn đặt hàng hoặc đơn đặt hàng được khớp với một đơn đặt hàng khác, ưu đãi sẽ được thực hiện và giao dịch được thực hiện bởi Rubicon Market.

| Parameter                 | Use                                                                                                                                          |
| ------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| uint pay_amt              | The quantity of the asset that the user is _offering in wad_                                                                                 |
| ERC20 pay_gem             | The ERC-20 asset that the user is _offering_                                                                                                 |
| uint buy_amt              | The quantity of the asset that the user is hoping to _exchange for in wad_                                                                   |
| ERC20 buy_gem             | The asset the user is hoping to _exchange for_                                                                                               |
| uint pos                  | The position in the _sorted order book_ to place the order. Set this to 0 unless you know the exact position (closest id) to place the order |
| \[Optional] bool matching | Optional boolean that dictates _whether or not the offer should be automatically matched_ if possible                                        |

Điều quan trọng cần lưu ý là chức năng cung cấp có một vài đại diện trong thị trường Rubicon. _Tùy chọn_ người dùng có thể thêm thông số _pos_ hoặc _matching_. Những điều này cho phép người dùng chọn vị trí trong sổ đặt hàng đã sắp xếp mà ưu đãi sẽ tồn tại và liệu ưu đãi có phải tuân theo khả năng khớp lệnh tự động tiềm năng hay không.

#### Mua

```
function buy(uint id, uint amount) public can_buy(id)
    returns (bool)
```

| Parameter   | Use                                                         |
| ----------- | ----------------------------------------------------------- |
| uint id     | The id of the order the user wants to buy                   |
| uint amount | The wad quantity/portion of the order the user wants to buy |

The buy function allows a user to buy a given order in the order book and ultimately calls super.buy() in the RubiconMarket.sol contract. Furthermore, the buy function will also result in the caller paying the trade fee (see fees).

#### Cancel

```
function cancel(uint id)
    public
    can_cancel(id)
    returns (bool success)
```

| Parameter | Use                                          |
| --------- | -------------------------------------------- |
| uint id   | The id of the order the user wants to cancel |

Chức năng này cho phép người dùng hủy ưu đãi và trả lại tiền cho người dùng. Công cụ sửa đổi **can_cancel** kiểm tra để đảm bảo rằng người gọi sở hữu phiếu mua hàng và phiếu mua hàng đang hoạt động. Ngoài ra, người dùng cũng có thể sử dụng chức năng định tuyến **kill** để đạt được kết quả tương tự và hủy đơn đặt hàng của họ tại một id nhất định.

### Chức năng định tuyến

#### BuyAllAmount

```
    function buyAllAmount(
    ERC20 buy_gem,
    uint256 buy_amt,
    ERC20 pay_gem,
    uint256 max_fill_amount
) external returns (uint256 fill_amt)
```

| Parameter | Use                                          |
| --------- | -------------------------------------------- |
| uint id   | The id of the order the user wants to cancel |

This function allows a user to buy any amount of an asset (buy_gem) through multiple orders in the book. The function will keep buying through orders until the desired buy-amt is acquired.

#### Take

```
function take(bytes32 id, uint128 maxTakeAmount) public
```

| Parameter          | Use                                                         |
| ------------------ | ----------------------------------------------------------- |
| uint id            | The id of the order the user wants to buy                   |
| uint maxTakeAmount | The wad quantity/portion of the order the user wants to buy |

Đây chỉ đơn giản là một chức năng định tuyến cho phép người dùng dễ dàng nhận phiếu mua hàng thông qua điểm vào **lấy**. Điều này sẽ định tuyến người dùng để sau đó _mua phiếu mua hàng._
