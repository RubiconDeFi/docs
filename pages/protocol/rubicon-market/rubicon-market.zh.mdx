---
title: Rubicon/Rubiconå¸‚åœº
pageTitle: Rubiconå¸‚åœº
description: Rubiconè®¢å•ç°¿åˆåŒæ¦‚è¿°å’Œæ–‡æ¡£
---

Rubicon çš„æ ¸å¿ƒäº¤æ˜“é€»è¾‘ä½äº [RubiconMarket](https://github.com/RubiconDeFi/rubicon_protocol/blob/master/contracts/RubiconMarket.sol)æ™ºèƒ½åˆçº¦ - Rubicon çš„ä¸­å¤®è®¢å•ç°¿ã€‚å°†æ­¤æ™ºèƒ½åˆçº¦è§†ä¸ºä¸­é—´å±‚æ˜¯æœ‰ç”¨çš„ï¼Œå®ƒé€šè¿‡è®¢å•ç°¿ä¿ƒè¿›æ•°å­—èµ„äº§çš„ç‚¹å¯¹ç‚¹äº¤æ¢ã€‚

# ğŸ“Š å¢æ¯”è‚¯å¸‚åœº

ï¼ƒï¼ƒ æ¦‚è¿°

Rubicon Market æ™ºèƒ½åˆçº¦å®ç°äº†é“¾ä¸Šè®¢å•ç°¿å’Œ [ERC-20 tokens](https://ethereum.org/en/developers/docs/standards/tokens/erc-20/) ç‚¹å¯¹ç‚¹äº¤æ˜“çš„åŒ¹é…å¼•æ“ã€‚

è®¢å•ç°¿æ˜¯æŒ‰ä»·æ ¼æ’åºçš„èµ„äº§ä¹°å–è®¢å•åˆ—è¡¨ã€‚è¯¥åˆçº¦å°†æ¯ä¸ª ERC20/ERC20 è®¢å•ç°¿å®ç°ä¸ºä¸¤ä¸ªåŒå‘é“¾æ¥çš„æ’åºåˆ—è¡¨ï¼Œä¸€ä¸ªç”¨äºç»™å®šå¸‚åœºçš„ä¹°æ–¹ï¼Œä¸€ä¸ªç”¨äºå–æ–¹ã€‚

åˆçº¦ä½¿ç”¨æ‰˜ç®¡æ¨¡å‹æ¥æä¾›æµåŠ¨æ€§ï¼›å½“åœ¨è´¦ç°¿ä¸Šæ”¾ç½®é™ä»·è®¢å•æ—¶ï¼Œè¿™äº›ä»£å¸å°†å‘é€åˆ°åˆçº¦ã€‚å¦‚æœ/å½“è®¢å•è¢«æ‰§è¡Œæ—¶ï¼Œåˆçº¦ç›´æ¥åŒ¹é…äº¤æ˜“è€…å¹¶å°†ä»£å¸å‘é€ç»™æ¯ä¸€æ–¹ã€‚å¯ä»¥å–æ¶ˆè®¢å•ï¼Œåˆçº¦ä¼šå°†ä»£å¸è¿”è¿˜ç»™å‘é€è€…ã€‚

Rubicon Market æ˜¯ MakerDAO å¼€æºçš„è¡ç”Ÿä½œå“ [OasisDEX](https://oasisdex.com/)å¹¶ç»§æ‰¿äº† AGPL3 è®¸å¯ã€‚

## äº¤æ˜“åŠŸèƒ½

ï¼ƒï¼ƒï¼ƒ æä¾›ï¼ˆï¼‰

```
    function offer(
        uint256 pay_amt,
        ERC20 pay_gem,
        uint256 buy_amt,
        ERC20 buy_gem,
        uint256 pos,
    ) public returns (uint256)
```

| Parameter Name         | Type        | Description                                                                                                                       |
| ---------------------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------- |
| pay\_amt               | uint256     | Quantity of ERC-20 tokens the maker is selling                                                                                    |
| pay\_gem               | address     | ERC-20 token the maker is selling                                                                                                 |
| uint buy\_amt          | uint256     | Quantity of ERC-20 tokens the maker is buying                                                                                     |
| ERC20 buy\_gem         | address     | ERC-20 token the maker is buying                                                                                                  |
| uint pos               | uint256     | Position in the sorted list to place the order. Set this to 0 unless you know the exact position (closest ID) to insert the order |
| \[Optional] matching   | bool        | Optional boolean to determine whether the offer should be automatically matched (placed in the sorted list)                       |

The primary function for placing limit orders on Rubicon. The **pay_amt** quantity of the **pay_gem** token will be sent to the order book contract, sitting in escrow until it is filled or canceled. Always set pos to **0** unless you know the exact position in the sorted lost to insert the order.

### cancel()

```
    function cancel(uint id)
        public
        can_cancel(id)
        returns (bool success)
```

| Parameter Name         | Type        | Description                                    |
| ---------------------- | ----------- | ---------------------------------------------- |
| id                     | uint256     | The id of the order the user wants to cancel   |

æ­¤åŠŸèƒ½ç”¨äºå¡«å†™æˆ–â€œæŒ‘é€‰â€è´¦ç°¿ä¸­çš„ç‰¹å®šè®¢å•ã€‚æ¥ç”µè€…å°†æ”¯ä»˜æ¥å—è€…è´¹ç”¨ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ **take()** è·¯ç”±å‡½æ•°æ¥è·å¾—ç›¸åŒçš„ç»“æœå¹¶å¡«å†™ç‰¹å®šæŠ¥ä»·ã€‚

### buyAllAmountï¼ˆï¼‰

```
     function buyAllAmount(
        ERC20 buy_gem,
        uint256 buy_amt,
        ERC20 pay_gem,
        uint256 max_fill_amount
    ) external returns (uint256 fill_amt)
```

| Parameter Name         | Type        | Description                                    |
| ---------------------- | ----------- | ---------------------------------------------- |
| buy\_gem               | address     | ERC-20 token the taker is buying               |
| buy\_amt               | uint256     | Quantity of tokens the taker is buying         |
| pay\_gem               | address     | ERC-20 token the taker is selling              |
| max\_fill\_amount      | uint256     | Maximum amount of pay tokens sold              |

å°è¯•ç”¨ **sell_amt** æ•°é‡çš„ **sell_gem** ä»£å¸äº¤æ˜“è‡³å°‘ **min_fill_amount** æ•°é‡çš„ **pay_gem** ä»£å¸ã€‚å¦‚æœäº¤æ˜“è€…æ”¶åˆ°çš„é‡‘é¢å°‘äºæŒ‡å®šçš„æœ€ä½é‡‘é¢ï¼Œäº¤æ˜“å°†æ¢å¤ã€‚è¿™æ˜¯ä¸€ä¸ªâ€œFill-or-Killâ€å–å•ã€‚

## æŸ¥çœ‹å‡½æ•°

### getBestOfferï¼ˆï¼‰

```
function getBestOffer(ERC20 pay_gem, ERC20 buy_gem)
    public
    view
    returns (uint256)
```

è¿”å›è®¢å•ç°¿é¡¶éƒ¨çš„æŠ¥ä»· IDã€‚

å‰ä»»ã€‚ä½¿ç”¨ WETH ä½œä¸º **pay_gem** å’Œ USDC ä½œä¸º **buy_gem** è°ƒç”¨æ­¤å‡½æ•°å°†è¿”å› WETH/USDC çš„æœ€ä½³è¯¢ä»·ã€‚åˆ‡æ¢ä»£å¸å°†è¿”å›æœ€ä½³å‡ºä»·ã€‚

### getWorseOffer()

```
function getWorseOffer(uint256 id)
    public
    view
    returns (uint256)
```

è¿”å›æ’åºåˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å·®çš„æŠ¥ä»·ã€‚å¦‚æœç›®æ ‡è®¢å•æ˜¯è¦ä»·ï¼Œåˆ™è¾ƒå·®çš„æŠ¥ä»·è¾ƒé«˜ï¼Œå¦‚æœæ˜¯å‡ºä»·ï¼Œåˆ™æŠ¥ä»·è¾ƒä½ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªè¾ƒæ–°çš„ã€‚

### getBuyAmountï¼ˆï¼‰

```
    function getBuyAmount(
        ERC20 buy_gem,
        ERC20 pay_gem,
        uint256 pay_amt
    ) external view returns (uint256 fill_amt)
```

å¦‚æœèŠ±è´¹äº†æŒ‡å®šæ•°é‡çš„ **pay_gem** ä»£å¸ï¼Œåˆ™è¿”å›æ”¶åˆ°çš„ **buy_gem** ä»£å¸æ•°é‡ã€‚ç”¨äºæ£€æŸ¥è®¢å•ç°¿çš„å½“å‰çŠ¶æ€ã€‚

### è·å–æ”¯ä»˜é‡‘é¢ï¼ˆï¼‰

```
function getPayAmount(
        ERC20 pay_gem,
        ERC20 buy_gem,
        uint256 buy_amt
    ) external view returns (uint256 fill_amt)
```

è¿”å›è´­ä¹°æŒ‡å®šæ•°é‡çš„ **buy_gem** ä»£å¸æ‰€éœ€çš„ **pay_gem** ä»£å¸æ•°é‡ã€‚ç”¨äºæ£€æŸ¥è®¢å•ç°¿çš„å½“å‰çŠ¶æ€ã€‚

### getOfferCountï¼ˆï¼‰

```
function getOfferCount(ERC20 sell_gem, ERC20 buy_gem)
        public
        view
        returns (uint256)
```

è¿”å›æŒ‡å®šå¯¹çš„è®¢å•ç°¿ä¸­çš„æŠ¥ä»·æ•°é‡ã€‚

### getFeeBPSï¼ˆï¼‰

```
function getFeeBPS()
    public
    view
    returns (uint256)
```

ä»¥åŸºç‚¹ä¸ºå•ä½è¿”å›åè®®æ¥å—è€…è´¹ç”¨ã€‚