---
title: Rubicon | Fonctions Clés du Marché
pageTitle: Fonctions Clés du Marché
description: Les principaux points d'entrée et fonctions du contrat Rubicon Market
---

## Fonctions clés

#### Offre

```
function offer(uint pay_amt, ERC20 pay_gem, uint buy_amt, ERC20 buy_gem, uint pos) 
    public returns (uint)
```

La fonction **offre** est la fonction principale pour placer un nouvel ordre d'achat ou de vente à cours limité sur le marché Rubicon. Cette fonction prend les fonds d'un utilisateur pour une paire _ERC-20_ donnée et les place dans le carnet de commandes du contrat intelligent. Lorsqu'un autre utilisateur choisit d'acheter la commande ou que la commande est associée à une autre commande, l'offre sera remplie et la transaction exécutée par le marché Rubicon.

| Parameter                 | Use                                                                                                                                          |
| ------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| uint pay\_amt             | The quantity of the asset that the user is _offering in wad_                                                                                 |
| ERC20 pay\_gem            | The ERC-20 asset that the user is _offering_                                                                                                 |
| uint buy\_amt             | The quantity of the asset that the user is hoping to _exchange for in wad_                                                                   |
| ERC20 buy\_gem            | The asset the user is hoping to _exchange for_                                                                                               |
| uint pos                  | The position in the _sorted order book_ to place the order. Set this to 0 unless you know the exact position (closest id) to place the order |
| \[Optional] bool matching | Optional boolean that dictates _whether or not the offer should be automatically matched_ if possible                                        |

Il est important de noter que la fonction d'offre a quelques représentations sur le marché Rubicon. _Facultativement,_ un utilisateur peut ajouter un paramètre _pos_ ou _matching_. Ceux-ci permettent à l'utilisateur de choisir où l'offre doit se trouver dans le carnet de commandes trié et si l'offre doit ou non être soumise à une correspondance automatique potentielle de la commande.

#### Acheter

```
function buy(uint id, uint amount) public can_buy(id) 
    returns (bool)
```

| Parameter   | Use                                                          |
| ----------- | ------------------------------------------------------------ |
| uint id     | The id of the order the user wants to buy                    |
| uint amount | The wad quantity/portion of the order the user wants to buy  |

The buy function allows a user to buy a given order in the order book and ultimately calls super.buy() in the RubiconMarket.sol contract. Furthermore, the buy function will also result in the caller paying the trade fee (see fees).

#### Cancel

```
function cancel(uint id)
    public
    can_cancel(id)
    returns (bool success)
```

| Parameter | Use                                          |
| --------- | -------------------------------------------- |
| uint id   | The id of the order the user wants to cancel |

Cette fonction permet à un utilisateur d'annuler une offre et de restituer des fonds à l'utilisateur. Le modificateur **can\_cancel** vérifie que l'appelant est propriétaire de l'offre et que l'offre est active. Alternativement, l'utilisateur peut également utiliser la fonction de routage **kill** pour obtenir le même résultat et annuler sa commande à un identifiant donné.

### Fonctions de routage

#### BuyAllAmount

```
    function buyAllAmount(
    ERC20 buy_gem,
    uint256 buy_amt,
    ERC20 pay_gem,
    uint256 max_fill_amount
) external returns (uint256 fill_amt)
```

| Parameter | Use                                          |
| --------- | -------------------------------------------- |
| uint id   | The id of the order the user wants to cancel |

This function allows a user to buy any amount of an asset (buy\_gem) through multiple orders in the book. The function will keep buying through orders until the desired buy-amt is acquired.

#### Take

```
function take(bytes32 id, uint128 maxTakeAmount) public
```

| Parameter          | Use                                                          |
| ------------------ | ------------------------------------------------------------ |
| uint id            | The id of the order the user wants to buy                    |
| uint maxTakeAmount | The wad quantity/portion of the order the user wants to buy  |

Il s'agit simplement d'une fonction de routage qui permet à un utilisateur de prendre facilement une offre via le point d'entrée **take**. Cela conduira un utilisateur à _acheter l'offre._