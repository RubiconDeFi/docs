---
title: Rubicon | Ключевые функции рынка
pageTitle: Ключевые функции рынка
description: Основные точки входа и функции рыночного контракта Rubicon
---

## Основные функции

#### Предложение

```
function offer(uint pay_amt, ERC20 pay_gem, uint buy_amt, ERC20 buy_gem, uint pos) 
    public returns (uint)
```

Функция **offer** — это основная функция для размещения нового лимитного ордера на покупку или продажу на рынке Rubicon. Эта функция берет средства пользователя для данной пары _ERC-20_ и помещает их в книгу заказов смарт-контракта. Когда другой пользователь решит купить ордер или ордер сопоставляется с другим ордером, предложение будет выполнено, и сделка будет выполнена Rubicon Market.

| Parameter                 | Use                                                                                                                                          |
| ------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| uint pay\_amt             | The quantity of the asset that the user is _offering in wad_                                                                                 |
| ERC20 pay\_gem            | The ERC-20 asset that the user is _offering_                                                                                                 |
| uint buy\_amt             | The quantity of the asset that the user is hoping to _exchange for in wad_                                                                   |
| ERC20 buy\_gem            | The asset the user is hoping to _exchange for_                                                                                               |
| uint pos                  | The position in the _sorted order book_ to place the order. Set this to 0 unless you know the exact position (closest id) to place the order |
| \[Optional] bool matching | Optional boolean that dictates _whether or not the offer should be automatically matched_ if possible                                        |

Важно отметить, что функция предложения имеет несколько представлений на рынке Рубикона. _При желании_ пользователь может добавить параметр _pos_ или _matching_. Они позволяют пользователю выбирать, где в отсортированной книге заказов должно находиться предложение и должно ли предложение подвергаться потенциальному автоматическому сопоставлению заказа.

#### Купить

```
function buy(uint id, uint amount) public can_buy(id) 
    returns (bool)
```

| Parameter   | Use                                                          |
| ----------- | ------------------------------------------------------------ |
| uint id     | The id of the order the user wants to buy                    |
| uint amount | The wad quantity/portion of the order the user wants to buy  |

The buy function allows a user to buy a given order in the order book and ultimately calls super.buy() in the RubiconMarket.sol contract. Furthermore, the buy function will also result in the caller paying the trade fee (see fees).

#### Cancel

```
function cancel(uint id)
    public
    can_cancel(id)
    returns (bool success)
```

| Parameter | Use                                          |
| --------- | -------------------------------------------- |
| uint id   | The id of the order the user wants to cancel |

Эта функция позволяет пользователю отменить предложение и возвращает средства пользователю. Модификатор **can\_cancel** проверяет, принадлежит ли вызывающему абоненту предложение и что предложение активно. В качестве альтернативы пользователь также может использовать функцию маршрутизации **kill** для достижения того же результата и отмены своего заказа с заданным идентификатором.

### Функции маршрутизации

#### КупитьВсеСумма

```
    function buyAllAmount(
    ERC20 buy_gem,
    uint256 buy_amt,
    ERC20 pay_gem,
    uint256 max_fill_amount
) external returns (uint256 fill_amt)
```

| Parameter | Use                                          |
| --------- | -------------------------------------------- |
| uint id   | The id of the order the user wants to cancel |

This function allows a user to buy any amount of an asset (buy\_gem) through multiple orders in the book. The function will keep buying through orders until the desired buy-amt is acquired.

#### Take

```
function take(bytes32 id, uint128 maxTakeAmount) public
```

| Parameter          | Use                                                          |
| ------------------ | ------------------------------------------------------------ |
| uint id            | The id of the order the user wants to buy                    |
| uint maxTakeAmount | The wad quantity/portion of the order the user wants to buy  |

Это просто функция маршрутизации, которая позволяет пользователю легко принять предложение через точку входа **взять**. Это направит пользователя к тому, чтобы затем _купить предложение._