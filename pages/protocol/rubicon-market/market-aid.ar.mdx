---
title: روبيكون / مساعدة السوق
pageTitle: مساعدات السوق
description: على سلسلة عالية التردد السوق صنع العقود والوظائف لروبيكون
---

## مساعدات السوق

"MarketAid.sol" هو عقد مساعد يسمح للمالك بإرسال دفعات من الأوامر المحددة وإلغاء الطلبات على "RubiconMarket.sol". إنه يسهل على المتداولين النشطين وصناع السوق وضع وإلغاء العديد من الطلبات المعلقة في معاملة واحدة! يمكنك التفكير في MarketAid كعقد متوسط ​​الطبقة يسمح للمتداولين بإجراء معاملات أكبر وأكثر كفاءة وأكثر تعقيدًا على دفاتر أوامر Rubicon.

بعد إنشاء مثيل MarketAid ، يمكن للمتداول استخدام وظائف الدُفعات القوية التي تعمل على توسيع وظائف "RubiconMarket.sol" منخفضة المستوى "العرض" و "الإلغاء" بالإضافة إلى مجموعات من الاثنين. أرسل دفعة كبيرة من أوامر الحد باستخدام `` batchMarketMakingTrades () '' ، وقم بإلغاء مجموعة من الأوامر المفتوحة واستبدلها بـ `` batchRequoteOffers () '' ، أو قم بإلغاء الكثير من الطلبات المفتوحة باستخدام `` scrubStrategistTrades () ''. استمر في القراءة للحصول على برنامج تعليمي حول البدء السريع ونظرة عامة على وظائف MarketAid. إذا كانت لديك أي أسئلة أو مشكلة مع MarketAid ، انضم إلى [Discord server](https://discord.com/invite/E7pS24J) ، يسعد فريقنا مساعدتك في البدء بالتداول الآلي على Rubicon!

### إخلاء المسؤولية عن المخاطر

MarketAid في مرحلة تجريبية وللمتداولين والمطورين المتمرسين فقط. يستخدم فريقنا هذا الرمز ، لكنه غير مدقق ، لذا استخدمه على مسؤوليتك الخاصة.

### عمليات النشر

التفاؤل Mainnet:

- [Factory](https://optimistic.etherscan.io/address/0x267D94C6e67e4436EFfE092b08d040cFF36B2DA7)
- [MarketAid Instance Example](https://optimistic.etherscan.io/address/0x40e20121f46237Ae5d6822fd75847CedD17c449F)

التفاؤل جويرلي:

- [Factory](https://goerli-optimism.etherscan.io/address/0x6838dd21aa01Bde8E600d499A95f9AE02f2bB376)
- [MarketAid Instance](https://goerli-optimism.etherscan.io/address/0xd3757c79df77cfac54501b5dadf7ec47a38e1a65)

### بداية سريعة

ابدأ بـ "MarketAid.sol" من خلال إنشاء مثيل شخصي ، وتمويل العقد باستخدام الرموز المميزة ERC-20 ، وإرسال الدفعة الأولى من الطلبات إلى "RubiconMarket.sol"! يمكنك استخدام "ethers.js" لدمج هذا في روبوت موجود ، ونحن نعمل على برامج تعليمية لتسهيل الأمر! هيا بنا نبدأ:

1. قم بإنشاء مثيل جديد لعقد "MarketAid"
   1. قم بنشر مثيل "MarketAid" عن طريق استدعاء "createMarketAidInstance ()" في عقد "MarketAidFactory". سيؤدي هذا إلى إنتاج نسخة جديدة من "MarketAid" يتم الإذن بها للمتصل بـ "createMarketAidInstance ()" والموافقة عليها تلقائيًا كخبير استراتيجي مع إمكانية الوصول إلى العقد.
2. قم بتمويل مثيل MarketAid الخاص بك باستخدام ERC-20s التي تريد تداولها (WETH ، USDC ، DAI ، إلخ.)

   1. يمكن الاستعلام عن مثيل MarketAid الخاص بك عبر `getUserMarketAid ()` في "MarketAidFactory" أو من خلال قراءة الحدث المنبعث من المكالمة `createMarketAidInstance ()`.
   2. تحقق من أنك تتحكم في العقد أولاً عبر Etherscan عن طريق التحقق من متغير "admin" هو عنوانك وأنك أيضًا "معتمد إستراتيجي".
   3. تحقق من أنك ترسل الأموال إلى العنوان الصحيح!

3. أرسل دفعات من طلبات Rubicon من عقد MarketAid باستخدام الوظائف الموضحة أدناه

ملاحظة: يمكن لمالك مثيل "MarketAid" الموافقة على عناوين إضافية لاستخدام العقد والوصول إليه (يمكن لعناوين متعددة مسح الاختيار "onlyApprovedStrategist")

## استكشاف الأخطاء وإصلاحها

تأكد من التحقق مما يلي:

- أين مثيل MarketAid الخاص بي؟
  - استعلام باستخدام `` getUserMarketAid () "-> يُرجع مصفوفة من جميع المثيلات التي قمت بإنشائها
- وافق مثيل MarketAid الخاص بك على العقود التي تريد التفاعل معها
  - خلاف ذلك ، سوف المعاملات. يؤدي استخدام "placeMarketMakingTrades ()` إلى الموافقة تلقائيًا على عقد "RubiconMarket"
- أنت المسؤول عن مثيل Market Aid
  - استعلام باستخدام `admin ()` في المثيل الخاص بك -> يُرجع EOA الذي يمتلك المثيل
- أي EOA تحاول إدارة زوج ERC20 معه ، عبر MarketAid هو استراتيجي معتمد
  - الفحص الأمني ​​الرئيسي في العقد ، تمت الموافقة تلقائيًا على المسؤول كخبير استراتيجي

## وظائف (قيد التقدم)

بشكل عام ، يكون كل عنصر من المدخلات هو نفسه تمامًا كما هو الحال في RubiconMarket منخفضة المستوى: القيم الأولية لـ ERC20s التي تريد المزايدة عليها و / أو طلبها عند تقديم العروض (`` offer () '). من أجل التجميع ، قم بتمرير القيم لجميع العروض كمصفوفات ، مع إقران جميع المتغيرات المتشابهة (على سبيل المثال ، اسأل البسط) معًا. يجب أن تتطابق المصفوفات التي تم تمريرها بشكل أساسي - يمكن أن يكون هذا مفيدًا عند وضع عدد من العروض دفعة واحدة بأسعار مختلفة. لاحظ أن استخدام `formatUnits ()` و` parseUnits () `من خلال` ethers` يساعد في الأرقام وقيم ERC-20 عند التعامل مع الرقم البشري `=` تحويلات wei.

يتمثل أحد المفاهيم المهمة في أن كل طلب يتم تقديمه من خلال MarketAid (عبر "placeMarketMakingTrades") يُنشئ معرّفًا فريدًا يمكنه تحديد الطلبات المعلقة لصانع السوق. يمكن الاستعلام عن الكتاب المتميز في أي وقت عن أي EOA معين من خلال `getOutstandingStrategistTrades ()` - وهذا مفيد لإدارة كتاب متميز والحصول على قائمة المعرفات الفريدة أو "StrategistTrades" لعناصر تحكم مستخدم معينة. يمكن لصانع السوق الاستعلام عن كتابه ، ثم إعادة تسعير ("batchRequoteOffers") أو إلغاء ("scrubStrategistTrades") حسب الحاجة. لاحظ أن التعبئة تتراكم تلقائيًا إلى مثيل "MarketAid" الذي يتحكم فيه المستخدم.

- مكان MarketMakingTrades
  - ضع BID و / أو ASK في "تداول استراتيجي" فريد
- batchMarketMakingTrades
  - قم اختياريًا بوضع العديد من مكالمات placeMarketMakingTrades على دفعات لنشر منحنى سيولة كامل (على سبيل المثال 10 عروض و 10 طلبات بأسعار وأحجام مختلفة حسب ظروف السوق)
- getOutstandingStrategistTrades _view_
  - إرجاع المعرفات الفريدة لعروض المستخدم المعلقة (دفعة)
- getStrategistTotalL Liquidity _view_
  - إرجاع إجمالي القيمة الدفترية لـ ERC-20 التي يتحكم فيها المستخدم عبر السوق والقيمة الموجودة في مثيل MarketAid
- إعادة التسعير
  - إعادة تسعير فردية للتداول الإستراتيجي (زوج العرض و / أو الطلب) لزوج جديد يقوم بإنشاء معرف فريد جديد
- batchRequoteOffers
  - إعادة تسعير الطلب () دفعة واحدة لتحديث منحنى سيولة كامل دفعة واحدة. يؤدي هذا إلى إلغاء جميع المعرفات المحددة واستبدالها بحمولات العرض الجديدة المحددة
- batchRequoteAllOffers
  - يحصل على معرّفات الكتاب المعلقة للمستخدم عبر `` getOutstandingStrategistTrades () '' ثم يقوم بتحديثها جميعًا عبر `` batchRequoteOffers ()
- فركستراتيجي التجارة
  - يلغي "تداول استراتيجي" ويعيد الأموال التي لم يتم ملؤها / نقلها إلى Market Aid
- فرك إستراتيجي الصفقات
  - الغاء عدة صفقات تداول في صفقة واحدة
- adminPullAllFunds
  - وظيفة مفيدة للمشرف لاستعادة جميع أمواله من خلال تحديد ERC-20s التي يريدها
- استراتيجيRebalanceFunds
  - وظيفة اختيارية لاستخدام مكان سيولة خارجي للمراجحة أو إعادة موازنة الأموال من خلاله