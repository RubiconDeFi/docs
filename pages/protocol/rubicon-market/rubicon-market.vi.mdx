---
title: Rubicon | Thá»‹ TrÆ°á»ng Rubicon
pageTitle: Thá»‹ TrÆ°á»ng Rubicon
description: Tá»•ng quan vÃ  tÃ i liá»‡u Cho há»£p Ä‘á»“ng sá»• Ä‘áº·t HÃ ng Cá»§a Rubicon
---

Logic trao Ä‘á»•i cá»‘t lÃµi cá»§a Rubicon tá»“n táº¡i trong [RubiconMarket](https://github.com/RubiconDeFi/rubicon_protocol/blob/master/contracts/RubiconMarket.sol) há»£p Ä‘á»“ng thÃ´ng minh - sá»• lá»‡nh trung tÃ¢m cá»§a Rubicon. Sáº½ ráº¥t há»¯u Ã­ch khi coi há»£p Ä‘á»“ng thÃ´ng minh nÃ y nhÆ° má»™t lá»›p trung gian táº¡o Ä‘iá»u kiá»‡n thuáº­n lá»£i cho viá»‡c trao Ä‘á»•i ngang hÃ ng cÃ¡c tÃ i sáº£n ká»¹ thuáº­t sá»‘ thÃ´ng qua sá»• Ä‘áº·t hÃ ng.

# ğŸ“Š Chá»£ Rubicon

## Tá»•ng quan

Há»£p Ä‘á»“ng thÃ´ng minh cá»§a Thá»‹ trÆ°á»ng Rubicon triá»ƒn khai cÃ¡c sá»• Ä‘áº·t hÃ ng trÃªn chuá»—i vÃ  má»™t cÃ´ng cá»¥ khá»›p lá»‡nh cho giao dá»‹ch ngang hÃ ng cá»§a [ERC-20 tokens](https://ethereum.org/en/developers/docs/standards/tokens/erc-20/).

Sá»• lá»‡nh lÃ  danh sÃ¡ch cÃ¡c lá»‡nh mua vÃ  bÃ¡n Ä‘á»‘i vá»›i má»™t tÃ i sáº£n, Ä‘Æ°á»£c sáº¯p xáº¿p theo giÃ¡. Há»£p Ä‘á»“ng nÃ y triá»ƒn khai má»—i sá»• Ä‘áº·t hÃ ng ERC20/ERC20 dÆ°á»›i dáº¡ng hai danh sÃ¡ch Ä‘Æ°á»£c sáº¯p xáº¿p liÃªn káº¿t kÃ©p, má»™t danh sÃ¡ch dÃ nh cho BÃªn mua vÃ  má»™t danh sÃ¡ch dÃ nh cho BÃªn bÃ¡n cá»§a thá»‹ trÆ°á»ng nháº¥t Ä‘á»‹nh.

Há»£p Ä‘á»“ng sá»­ dá»¥ng mÃ´ hÃ¬nh kÃ½ quá»¹ Ä‘á»ƒ thanh khoáº£n; khi má»™t lá»‡nh giá»›i háº¡n Ä‘Æ°á»£c Ä‘áº·t trÃªn sá»•, nhá»¯ng mÃ£ thÃ´ng bÃ¡o Ä‘Ã³ sáº½ Ä‘Æ°á»£c gá»­i Ä‘áº¿n há»£p Ä‘á»“ng. Náº¿u/khi má»™t Ä‘Æ¡n Ä‘áº·t hÃ ng Ä‘Æ°á»£c thá»±c hiá»‡n, há»£p Ä‘á»“ng sáº½ khá»›p trá»±c tiáº¿p vá»›i cÃ¡c nhÃ  giao dá»‹ch vÃ  mÃ£ thÃ´ng bÃ¡o sáº½ Ä‘Æ°á»£c gá»­i cho má»—i bÃªn. Má»™t Ä‘Æ¡n Ä‘áº·t hÃ ng cÃ³ thá»ƒ bá»‹ há»§y vÃ  há»£p Ä‘á»“ng sáº½ tráº£ láº¡i mÃ£ thÃ´ng bÃ¡o cho ngÆ°á»i gá»­i.

Rubicon Market lÃ  sáº£n pháº©m phÃ¡i sinh tá»« mÃ£ nguá»“n má»Ÿ [OasisDEX](https://oasisdex.com/) cá»§a MakerDAO. vÃ  káº¿ thá»«a giáº¥y phÃ©p AGPL3.

## Chá»©c nÄƒng giao dá»‹ch

### lá»i Ä‘á» nghá»‹()

```
    function offer(
        uint256 pay_amt,
        ERC20 pay_gem,
        uint256 buy_amt,
        ERC20 buy_gem,
        uint256 pos,
    ) public returns (uint256)
```

| Parameter Name       | Type    | Description                                                                                                                       |
| -------------------- | ------- | --------------------------------------------------------------------------------------------------------------------------------- |
| pay_amt              | uint256 | Quantity of ERC-20 tokens the maker is selling                                                                                    |
| pay_gem              | address | ERC-20 token the maker is selling                                                                                                 |
| uint buy_amt         | uint256 | Quantity of ERC-20 tokens the maker is buying                                                                                     |
| ERC20 buy_gem        | address | ERC-20 token the maker is buying                                                                                                  |
| uint pos             | uint256 | Position in the sorted list to place the order. Set this to 0 unless you know the exact position (closest ID) to insert the order |
| \[Optional] matching | bool    | Optional boolean to determine whether the offer should be automatically matched (placed in the sorted list)                       |

The primary function for placing limit orders on Rubicon. The **pay_amt** quantity of the **pay_gem** token will be sent to the order book contract, sitting in escrow until it is filled or canceled. Always set pos to **0** unless you know the exact position in the sorted lost to insert the order.

### cancel()

```
    function cancel(uint id)
        public
        can_cancel(id)
        returns (bool success)
```

| Parameter Name | Type    | Description                                  |
| -------------- | ------- | -------------------------------------------- |
| id             | uint256 | The id of the order the user wants to cancel |

Chá»©c nÄƒng nÃ y há»§y bá» má»™t Æ°u Ä‘Ã£i trÃªn sá»• Ä‘áº·t hÃ ng vÃ  tráº£ láº¡i mÃ£ thÃ´ng bÃ¡o cho Ä‘á»‹a chá»‰ cá»§a ngÆ°á»i gá»­i. CÃ´ng cá»¥ sá»­a Ä‘á»•i **can_cancel** kiá»ƒm tra xem Ä‘Æ¡n hÃ ng má»¥c tiÃªu cÃ³ Ä‘ang hoáº¡t Ä‘á»™ng vÃ  thuá»™c sá»Ÿ há»¯u cá»§a ngÆ°á»i gá»i hay khÃ´ng. NgoÃ i ra, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng chá»©c nÄƒng Ä‘á»‹nh tuyáº¿n **kill()** Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c káº¿t quáº£ tÆ°Æ¡ng tá»± vÃ  há»§y Æ°u Ä‘Ã£i.

### mua()

```
    function buy(uint id, uint amount) public can_buy(id)
        returns (bool)
```

| Parameter Name | Type    | Description                         |
| -------------- | ------- | ----------------------------------- |
| id             | uint256 | The id of the target order          |
| amount         | uint256 | Quantity of the target order to buy |

This function is used to fill or "cherry pick" a specific order in the book. The caller will pay the taker fee. Alternatively, you can use the **take()** routing function to achieve the same result and fill a specific offer.

### buyAllAmount()

```
     function buyAllAmount(
        ERC20 buy_gem,
        uint256 buy_amt,
        ERC20 pay_gem,
        uint256 max_fill_amount
    ) external returns (uint256 fill_amt)
```

| Parameter Name  | Type    | Description                            |
| --------------- | ------- | -------------------------------------- |
| buy_gem         | address | ERC-20 token the taker is buying       |
| buy_amt         | uint256 | Quantity of tokens the taker is buying |
| pay_gem         | address | ERC-20 token the taker is selling      |
| max_fill_amount | uint256 | Maximum amount of pay tokens sold      |

Cá»‘ gáº¯ng giao dá»‹ch sá»‘ lÆ°á»£ng **buy_amt** cá»§a mÃ£ thÃ´ng bÃ¡o **buy_gem** tá»‘i Ä‘a cho sá»‘ lÆ°á»£ng **max_fill_amount** cá»§a mÃ£ thÃ´ng bÃ¡o **pay_gem**. Giao dá»‹ch sáº½ hoÃ n nguyÃªn náº¿u nhÃ  giao dá»‹ch chi tiÃªu nhiá»u hÆ¡n sá»‘ tiá»n tá»‘i Ä‘a Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. ÄÃ¢y lÃ  lá»‡nh mua "Fill-or-Kill".

### sellAllAmount()

```
     function sellAllAmount(
        ERC20 pay_gem,
        uint256 pay_amt,
        ERC20 buy_gem,
        uint256 min_fill_amount
    ) external returns (uint256 fill_amt)
```

| Parameter Name  | Type    | Description                             |
| --------------- | ------- | --------------------------------------- |
| pay_gem         | address | ERC-20 token the taker is selling       |
| pay_amt         | uint256 | Quantity of tokens the taker is selling |
| buy_gem         | address | ERC-20 token the taker is buying        |
| min_fill_amount | uint256 | Minimum amount of buy tokens received   |

Ná»— lá»±c giao dá»‹ch sá»‘ lÆ°á»£ng **sell_amt** cá»§a **sell_gem** token Ä‘á»ƒ láº¥y Ã­t nháº¥t sá»‘ lÆ°á»£ng **min_fill_amount** cá»§a **pay_gem** tokens. Giao dá»‹ch sáº½ hoÃ n nguyÃªn náº¿u nhÃ  giao dá»‹ch nháº­n Ä‘Æ°á»£c Ã­t hÆ¡n sá»‘ tiá»n tá»‘i thiá»ƒu Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. ÄÃ¢y lÃ  lá»‡nh bÃ¡n "Fill-or-Kill".

## Xem chá»©c nÄƒng

### getBestOffer()

```
function getBestOffer(ERC20 pay_gem, ERC20 buy_gem)
    public
    view
    returns (uint256)
```

Tráº£ vá» ID cá»§a phiáº¿u mua hÃ ng á»Ÿ Ä‘áº§u sá»• Ä‘áº·t hÃ ng.

BÃ¡n táº¡i. Gá»i hÃ m nÃ y vá»›i WETH lÃ  **pay_gem** vÃ  USDC lÃ  **buy_gem** sáº½ tráº£ vá» yÃªu cáº§u tá»‘t nháº¥t trÃªn WETH/USDC. Chuyá»ƒn Ä‘á»•i mÃ£ thÃ´ng bÃ¡o sáº½ tráº£ láº¡i giÃ¡ tháº§u tá»‘t nháº¥t.

### getWorseOffer()

```
function getWorseOffer(uint256 id)
    public
    view
    returns (uint256)
```

Tráº£ vá» Æ°u Ä‘Ã£i tá»‡ hÆ¡n tiáº¿p theo trong danh sÃ¡ch Ä‘Ã£ sáº¯p xáº¿p. Æ¯u Ä‘Ã£i tá»‡ hÆ¡n lÃ  Æ°u Ä‘Ã£i cao hÆ¡n náº¿u Ä‘Æ¡n Ä‘áº·t hÃ ng má»¥c tiÃªu lÃ  yÃªu cáº§u vÃ  tháº¥p hÆ¡n náº¿u Ä‘Ã³ lÃ  giÃ¡ tháº§u. Trong cáº£ hai trÆ°á»ng há»£p, nÃ³ sáº½ tráº£ vá» má»™t cÃ¡i má»›i hÆ¡n náº¿u chÃºng báº±ng nhau.

### getBuyAmount()

```
    function getBuyAmount(
        ERC20 buy_gem,
        ERC20 pay_gem,
        uint256 pay_amt
    ) external view returns (uint256 fill_amt)
```

Tráº£ vá» sá»‘ lÆ°á»£ng mÃ£ thÃ´ng bÃ¡o **buy_gem** nháº­n Ä‘Æ°á»£c náº¿u má»™t lÆ°á»£ng mÃ£ thÃ´ng bÃ¡o **pay_gem** cá»¥ thá»ƒ Ä‘Æ°á»£c chi tiÃªu. ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ kiá»ƒm tra tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a sá»• lá»‡nh.

### getPayAmount()

```
function getPayAmount(
        ERC20 pay_gem,
        ERC20 buy_gem,
        uint256 buy_amt
    ) external view returns (uint256 fill_amt)
```

Tráº£ vá» sá»‘ lÆ°á»£ng mÃ£ thÃ´ng bÃ¡o **pay_gem** cáº§n thiáº¿t Ä‘á»ƒ mua má»™t lÆ°á»£ng mÃ£ thÃ´ng bÃ¡o **buy_gem** cá»¥ thá»ƒ. ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ kiá»ƒm tra tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a sá»• Ä‘áº·t hÃ ng.

### getOfferCount()

```
function getOfferCount(ERC20 sell_gem, ERC20 buy_gem)
        public
        view
        returns (uint256)
```

Tráº£ vá» sá»‘ lÆ°á»£ng phiáº¿u mua hÃ ng trong sá»• Ä‘áº·t hÃ ng cho má»™t cáº·p Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.

### getFeeBPS()

```
function getFeeBPS()
    public
    view
    returns (uint256)
```

Tráº£ vá» phÃ­ ngÆ°á»i thá»±c hiá»‡n giao thá»©c, theo Ä‘iá»ƒm cÆ¡ báº£n.
