---
title: ルビコン|市場の主な機能
pageTitle: 市場の主な機能
description: ルビコン市場契約の主なエントリポイントと機能
---

## 主な機能

＃＃＃＃ オファー

```
function offer(uint pay_amt, ERC20 pay_gem, uint buy_amt, ERC20 buy_gem, uint pos) 
    public returns (uint)
```

**offer** 機能は、Rubicon マーケットで新しい指値買いまたは指値売り注文を出すための主要な機能です。この関数は、指定された _ERC-20 ペア_ のユーザーの資金を受け取り、それらをスマート コントラクトのオーダー ブックに配置します。別のユーザーが注文を購入することを選択した場合、または注文が別の注文と一致した場合、オファーは約定され、ルビコン マーケットによって取引が実行されます。

| Parameter                 | Use                                                                                                                                          |
| ------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| uint pay\_amt             | The quantity of the asset that the user is _offering in wad_                                                                                 |
| ERC20 pay\_gem            | The ERC-20 asset that the user is _offering_                                                                                                 |
| uint buy\_amt             | The quantity of the asset that the user is hoping to _exchange for in wad_                                                                   |
| ERC20 buy\_gem            | The asset the user is hoping to _exchange for_                                                                                               |
| uint pos                  | The position in the _sorted order book_ to place the order. Set this to 0 unless you know the exact position (closest id) to place the order |
| \[Optional] bool matching | Optional boolean that dictates _whether or not the offer should be automatically matched_ if possible                                        |

オファー機能はルビコン市場でいくつかの表現を持っていることに注意することが重要です。 _オプションで_、ユーザーは _pos_ または _matching_ パラメータを追加できます。これらにより、ユーザーは、ソートされたオーダーブックのどこにオファーが存在するか、およびオファーが注文の潜在的な自動マッチングの対象となるかどうかを選択できます。

＃＃＃＃ 買う

```
function buy(uint id, uint amount) public can_buy(id) 
    returns (bool)
```

| Parameter   | Use                                                          |
| ----------- | ------------------------------------------------------------ |
| uint id     | The id of the order the user wants to buy                    |
| uint amount | The wad quantity/portion of the order the user wants to buy  |

The buy function allows a user to buy a given order in the order book and ultimately calls super.buy() in the RubiconMarket.sol contract. Furthermore, the buy function will also result in the caller paying the trade fee (see fees).

#### Cancel

```
function cancel(uint id)
    public
    can_cancel(id)
    returns (bool success)
```

| Parameter | Use                                          |
| --------- | -------------------------------------------- |
| uint id   | The id of the order the user wants to cancel |

この機能により、ユーザーはオファーをキャンセルし、資金をユーザーに戻すことができます。修飾子 **can\_cancel** は、発信者がオファーを所有しており、オファーがアクティブであることを確認します。あるいは、ユーザーは **kill** ルーティング関数を使用して同じ結果を得て、特定の ID での注文をキャンセルすることもできます。

### ルーティング機能

#### BuyAllAmount

```
    function buyAllAmount(
    ERC20 buy_gem,
    uint256 buy_amt,
    ERC20 pay_gem,
    uint256 max_fill_amount
) external returns (uint256 fill_amt)
```

| Parameter | Use                                          |
| --------- | -------------------------------------------- |
| uint id   | The id of the order the user wants to cancel |

This function allows a user to buy any amount of an asset (buy\_gem) through multiple orders in the book. The function will keep buying through orders until the desired buy-amt is acquired.

#### Take

```
function take(bytes32 id, uint128 maxTakeAmount) public
```

| Parameter          | Use                                                          |
| ------------------ | ------------------------------------------------------------ |
| uint id            | The id of the order the user wants to buy                    |
| uint maxTakeAmount | The wad quantity/portion of the order the user wants to buy  |

これは単純に、ユーザーが **take** エントリ ポイントを介してオファーを簡単に取得できるようにするルーティング機能です。これにより、ユーザーは_オファーを購入_するようにルーティングされます。