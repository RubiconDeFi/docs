---
title: زوج روبيكون / حمام
pageTitle: باث بير
description: صنع السوق الخاص بالزوج وتنفيذ الإستراتيجية
---

## حمام زوج

يمثل [BathPair contract](https://github.com/RubiconDeFi/rubicon\_protocol/blob/master/contracts/rubiconPools/BathPair.sol) قلب تجمعات روبيكون من خلال السماح للاستراتيجيين وسيولة المستخدم واعتبارات الأمان الرئيسية بالقدرة على الاجتماع معًا لزوج تداول معين. يسمح هذا العقد للاستراتيجيين بنشر سيولة المستخدم من أجل التسويق في سوق روبيكون. علاوة على ذلك ، يضمن هذا العقد أن أموال المستخدمين في مأمن من الجهات الخبيثة المحتملة والبقاء ضمن نظام الحلقة المغلقة وهو Rubicon Pools.

### المهام الرئيسية

* "initializePair" - يتم استدعاء هذه الوظيفة عندما يهيئ Bath House هذا العقد. تقوم هذه الوظيفة بإنشاء "رموز حمام" جديدة إذا لم تكن موجودة لمثيل "زوج الحمام" المحدد وتوجه الزوج إلى رمز باث للاقتباس الحالي إذا كان موجودًا بالفعل.
* `executeStrategy` - هذه هي الوظيفة الأساسية لـ BathPair.sol. في الإصدار صفر من Rubicon Pools ، فإنه يسمح للاستراتيجي بوضع تداول أزواج (طلب وعرض) مع سيولة bathToken الأساسية التي يديرها هذا الزوج. _ هذه الوظيفة هي نقطة دخول الاستراتيجيين لصنع السوق والاستفادة من سيولة المستخدم.
  * المعلمات التي قدمها الإستراتيجي عند استدعاء هذه الوظيفة هي:

      ```
          address targetStrategy,
          uint256 askNumerator, // *Asset Amt* / Quote Amt
          uint256 askDenominator, // Asset Amt / *Quote Amt*
          uint256 bidNumerator, // *Quote Amt* / Asset Amt
          uint256 bidDenominator // Quote Amt / *Asset Amt*
      ```
* `getMaxOrderSize` - تُرجع هذه الوظيفة أكبر حجم طلب لعطاء أو طلب يمكن للخبير الإستراتيجي وضعه بأموال المستخدم. علاوة على ذلك ، تضمن هذه الوظيفة فرض تحجيم الترتيب النسبي وديناميكي [inventory management](/docs/protocol/rubicon-pools/rubicon-pools#constraints-and-risk-parameters).
* "StrategistBootyClaim" - يتم استدعاء هذه الوظيفة من قبل الاستراتيجيين لإعادة العائد المكتسب إليهم تلقائيًا والذي قد يكون قد تم اكتسابه من خلال صناعة السوق الناجحة. الحساب الأساسي للمطالبة بالعائد هو (كمية الطلبات التي تم تنفيذها نتيجة لهذا المحلل الاستراتيجي) / (الكمية الإجمالية لملء الطلبات للأصل المحدد) \ * (المبلغ الأساسي للعائد).

### معلمات الأمان الرئيسية وتدفق التنفيذ

هناك عدد من معايير الأمان الموضوعة لضمان عدم قدرة الجهات الفاعلة الخبيثة أو صناع السوق الفقراء على نشر رأس مال المستخدم بشكل غير فعال في سوق Rubicon. تلعب كل هذه الوظائف والمعلمات دورًا في استدعاء الوظيفة الواحدة الذي أجراه الاستراتيجي: "executeStrategy". يرجى الاطلاع عليها أدناه بالترتيب الذي تحدث به أثناء تنفيذ استدعاء الوظيفة.

* `onlyApprovedStrategy` - يجب أن يوافق Bath House على الإستراتيجية المستهدفة لاستدعاء الوظيفة هذا.
* "EnceReserveRatio" - يضمن هذا المُعدِّل أن "ReserveRatio" لكل من مجموعات السيولة الأساسية (الأصول وحمّام الأسعار) يتم ملاحظتها قبل وبعد تنفيذ الوظيفة.
* `getMaxOrderSize` - تُستخدم هذه الوظيفة هنا للتأكد من أن البسط (ما يتم استخدامه من مجمعات السيولة) من العطاء والطلب يلتزم بقيود إدارة المخزون الديناميكية للأزواج.
* "فرض الانتشار" - تضمن هذه الوظيفة (أ) وجود فارق في الطلبات المقدمة لتداول الأزواج و (ب) أن تداول الأزواج له سعر طلب / عرض يقع في النصف الصحيح من دفتر الطلبات (اسأل / العطاء هو طلب / عطاء صالح `/` سعر نقطة الوسط لدفتر الطلبات). سيتم تنفيذ أوراكل السعر في الإصدارات المستقبلية لضمان احترام النقطة الوسطى لدفتر الطلبات كنقطة مرجعية صالحة.
* تنفيذ IPairsTrade (targetStrategy) - يتم استدعاء الإستراتيجية ويتم وضع تداول أزواج. انظر PairsTrade.sol.
* "إلغاء الجزء الجزئي" - تحلل هذه الوظيفة الحاسمة من خلال الطلبات المعلقة لهذا الزوج في دفتر الطلبات و (أ) تلغي أي أوامر تم تنفيذ نظرائها (عرض الطلب على طلب) من تجارة الأزواج. يمثل هذا حدث عائد تم فيه ملء صفقة الزوج جزئيًا. (ب) يتم إلغاء أي أوامر تجاوزت "التأجيل الزمني" لهذا الزوج لضمان عدم وجود سيولة مقفلة في الطلبات القديمة.
* "rebalancePair" - ترسل هذه الوظيفة البسيطة أي أوامر تم تنفيذها ترسل أصول ERC-20 إلى مجموعة شقيقة لـ Bath Token (Asset `< - >` Quote) إلى مجمع السيولة الصحيح بحيث يمكن تحقيق العائد .