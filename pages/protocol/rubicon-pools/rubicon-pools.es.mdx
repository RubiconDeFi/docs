---
title: Rubicon | Piscinas
pageTitle: Alberca
description: Rentabilidad automatizada para los usuarios y liquidez para el mercado Rubicon
---

##  Piscinas Rubic贸n

Rubicon Pools es un sistema de contratos inteligentes que permite a los usuarios capturar el rendimiento pasivo de la creaci贸n de mercado activa. Los usuarios depositan activos en un grupo de liquidez, a cambio, reciben un token LP l铆quido indicado por el prefijo "bath" (por ejemplo, bathETH, bathUSDC). Estos tokens de ba帽o significan la propiedad proporcional del usuario del grupo de liquidez subyacente, as铆 como su reclamo proporcional sobre el rendimiento futuro del grupo. Los estrategas utilizan los activos en los fondos de liquidez para proporcionar liquidez en los libros de 贸rdenes abiertas de Rubicon; los estrategas pueden usar estrategias personalizadas de creaci贸n de mercado que superen todos los requisitos de seguridad del protocolo. Al final, el rendimiento de la creaci贸n de mercado se divide entre el estratega y los usuarios que proporcionan liquidez (LP).

El protocolo del libro de 贸rdenes Rubicon tiene fondos de liquidez. Los proveedores de liquidez (LP) depositan tokens en un solo grupo de activos y reciben bathTokens, que representan acciones del grupo subyacente. (Ej. LP deposita ETH, recibe bathETH)\
\
Los BathTokens se adhieren a la [ERC-4626 standard](https://ethereum.org/en/developers/docs/standards/tokens/erc-4626/) para b贸vedas tokenizadas con rendimiento.

### Arquitectura

La estructura central de este producto gira en torno a fondos de liquidez de un solo activo. Los usuarios que desean un rendimiento pasivo de creaci贸n de mercado sobre sus activos pueden depositar en estos fondos de liquidez. A partir de ah铆, los estrategas utilizan estos grupos, en pares, para realizar una creaci贸n de mercado de alta frecuencia para el par dado (activo/cotizaci贸n). Consulte a continuaci贸n un diagrama de c贸mo las piezas centrales de Rubicon Pools interact煤an con Rubicon Market.

![Infraestructura de contrato inteligente Rubicon](</assets/image(83).png>)

Rubicon Pools se compone de cuatro contratos inteligentes que se detallan en estos documentos:

- **Bath House**: un contrato para administrar el sistema Rubicon Pools y autorizar nuevas parejas.
- **Bath Pair**: un contrato para gestionar par谩metros de riesgo, liquidez, gesti贸n de inventario, seguridad y estrategas espec铆ficos de la pareja.
- **Token de ba帽o**: un token de "ba帽o" ERC-20 (por ejemplo, "bathUSDC" es el token LP para USDC aportado) que representa liquidez espec铆fica de activos que obtiene un rendimiento pasivo de la creaci贸n de mercado.
- **Comercio de pares**: un contrato de estrategia que toma el comercio de un par (demanda y oferta) de un estratega para un par determinado y despliega la liquidez de bathToken de acuerdo con su estrategia interna. La primera versi贸n de PairsTrade.sol coloca una operaci贸n de pares (demanda y oferta) con la liquidez del usuario seg煤n los par谩metros del estratega a trav茅s de `executeStrategy` en BathPair.sol.

### Restricciones y par谩metros de riesgo

Una caracter铆stica de seguridad clave de Rubicon Pools es que la liquidez suministrada debe colocarse en el libro de pedidos como pedidos, los estrategas no pueden usar estos activos para otra cosa que no sea colocar pedidos en Rubicon. A diferencia de un AMM o creador de mercado de funci贸n constante, esta estrategia debe permitir que transcurra el tiempo entre la colocaci贸n de 贸rdenes, su ejecuci贸n y (a su vez) su rendimiento con fines de lucro que se transmite a los LP y estrategas. Consulte lo siguiente para obtener una descripci贸n general de las restricciones clave y los par谩metros de riesgo controlados por Rubicon:

- **reserveRatio**: para garantizar que el rendimiento de creaci贸n de mercado se transfiera correctamente a los usuarios y, al mismo tiempo, permita que transcurra el tiempo entre la colocaci贸n (y la cancelaci贸n) de las 贸rdenes, se debe mantener un 铆ndice de reserva m铆nimo para que no se pierda toda la liquidez del usuario. en riesgo en el libro de 贸rdenes en un momento dado.
- **maxOutstandingPairCount**: la cantidad m谩xima de pedidos (que no puede exceder los l铆mites de tama帽o de pedido din谩mico) que un par puede tener en el libro de pedidos en un momento dado.
- **getMaxOrderSize()**: esta funci贸n devuelve el tama帽o de pedido m谩s grande posible permitido por Rubicon Pools para un activo determinado y su grupo de liquidez.

  - **maxOrderSizeProportion** - el tama帽o en puntos porcentuales (0 < 100) that the maximum order for a given liquidity pool can be. This is enforced on every Pools trade.
  - **Dynamic Sizing:** should the pair relationship of a quote and asset liquidity pool be over-weighted one of the assets, this function will reduce the size of orders on the lacking side of the liquidity pool.

    - For example, assume the price of ETH is $100 and bathETH contains 5 ETH while bathUSDC contains 400 USDC. _The target asset-to-quote ratio for all pairs is the current price of the asset._ In this case, the pool is overweight ETH because (400 USDC / 5 ETH) = 80 != 100 (target ratio and price) so getMaxOrderSize() will return a value that reduces the maximum order size of ETH according to the following:

    - Shape parameter = -0.005 and qt represents the delta between the target ratio and the actual asset/quote ratio that exists across the liquidity pools.

![Optimal High-Frequency Market Making; Fushimi et. al 2018](</assets/image(32).png>)

### Consideraciones clave de seguridad

- **onlyApprovedStrategy**: un modificador que garantiza que la liquidez del usuario solo pueda ser utilizada por una estrategia que haya sido aprobada por BathHouse.
- **onlyPair**: un modificador que garantiza la liquidez del usuario o una funci贸n solo puede ser utilizada por un BathPair registrado que ha sido inicializado por BathHouse.
- **enforceReserveRatio**: garantiza que se respete y se cumpla la relaci贸n de reserva del saldo de activos subyacentes del grupo de liquidez con respecto a la cantidad de dep贸sitos.
- **enforceSpread**: garantiza que una negociaci贸n de pares estratega tenga un diferencial (precio de demanda > diferencial distinto de cero > precio de oferta) y que la demanda/oferta sea una demanda/oferta real (mayor que/menor que la mitad de el precio del libro de pedidos).
- **enforceNoAutoFills**: garantiza que las operaciones de pares realizadas por los estrategas sean realmente 贸rdenes de creaci贸n de mercado y no coincidan con una orden que d茅 como resultado que la oferta se complete autom谩ticamente como una operaci贸n de tomador.