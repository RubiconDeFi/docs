---
title: روبیکن | استخر
pageTitle: استخرها
description: عملکرد خودکار برای کاربران و نقدینگی برای بازار روبیکن
---

## 🌊 استخرهای روبیکون

Rubicon Pools سیستمی از قراردادهای هوشمند است که به کاربران امکان می دهد بازدهی غیرفعال را از بازارسازی فعال دریافت کنند. کاربران دارایی ها را به یک استخر نقدینگی واریز می کنند، در ازای آن، یک توکن LP مایع دریافت می کنند که با پیشوند "bath" مشخص شده است (مثلا bathETH، bathUSDC). این توکن‌های حمام نشان‌دهنده مالکیت متناسب کاربر از استخر نقدینگی زیربنایی و همچنین ادعای متناسب آنها بر بازدهی آتی استخر است. دارایی‌های موجود در استخرهای نقدینگی توسط استراتژیست‌ها برای تامین نقدینگی در دفاتر سفارش باز روبیکون استفاده می‌شود. استراتژیست ها می توانند از استراتژی های بازارسازی سفارشی استفاده کنند که تمام الزامات امنیتی پروتکل را پاس می کند. در پایان، بازده حاصل از بازارسازی بین استراتژیست و کاربران ارائه‌دهنده نقدینگی (LP) تقسیم می‌شود.

پروتکل دفتر سفارش روبیکون دارای استخرهای نقدینگی است. ارائه‌دهندگان نقدینگی (LPs) توکن‌ها را به یک مجموعه دارایی سپرده می‌کنند و bathTokens را دریافت می‌کنند که نشان دهنده سهام استخر زیربنایی است. (مثلا LP ETH رسوب می کند، bathETH ​​دریافت می کند)\
\
BathTokens به [ERC-4626 standard](https://ethereum.org/en/developers/docs/standards/tokens/erc-4626/) پایبند هستند برای خزانه های بازده توکن دار.

### معماری

ساختار اصلی این محصول حول محورهای نقدینگی _تک دارایی_ می چرخد. کاربرانی که خواهان سود منفعل بازارسازی در دارایی های خود هستند، می توانند به این استخرهای نقدینگی سپرده گذاری کنند. از آنجا، این استخرها سپس توسط استراتژیست ها، به صورت جفتی، برای انجام بازارسازی با فرکانس بالا برای جفت معین (دارایی/مقول) مورد استفاده قرار می گیرند. لطفاً برای نموداری از نحوه تعامل قطعات اصلی استخرهای روبیکون با بازار روبیکون، زیر را ببینید.

![زیرساخت قرارداد هوشمند روبیکون](</assets/image(83).png>)

Rubicon Pools از چهار قرارداد هوشمند تشکیل شده است که در این اسناد به تفصیل آمده است:

- **خانه حمام** - قراردادی برای مدیریت سیستم Rubicon Pools و اجازه جفت های جدید.
- **Bath Pair** - قراردادی برای مدیریت پارامترهای ریسک خاص جفت، نقدینگی، مدیریت موجودی، امنیت و استراتژیست ها.
- **توکن Bath** - یک رمز ERC-20 "bath" (به عنوان مثال "bathUSDC" رمز LP برای USDC مشارکتی است) که نشان دهنده نقدینگی خاص دارایی است که بازده غیرفعال را از بازارسازی به دست می آورد.
- **Pairs Trade** - یک قرارداد استراتژی که معامله یک جفت (درخواست و پیشنهاد) را از یک استراتژیست برای یک جفت معین می گیرد و نقدینگی bathToken را طبق استراتژی داخلی خود به کار می گیرد. اولین نسخه PairsTrade.sol یک معامله جفتی (پرسش و پیشنهاد) با نقدینگی کاربر را با توجه به پارامترهای استراتژیست از طریق "executeStrategy" در BathPair.sol قرار می دهد.

### محدودیت ها و پارامترهای ریسک

یکی از ویژگی‌های امنیتی کلیدی Rubicon Pools این است که نقدینگی عرضه شده باید به عنوان سفارش در دفتر سفارش قرار گیرد، استراتژیست‌ها نمی‌توانند از این دارایی‌ها برای چیزی غیر از سفارش دادن به Rubicon استفاده کنند. بر خلاف یک AMM یا بازارساز با عملکرد ثابت، این استراتژی باید اجازه دهد که زمان بین ثبت سفارش‌ها، اجرای آنها و (به نوبه خود) بازدهی انتفاعی آنها به شرکت‌های LP و استراتژیست‌ها بگذرد. لطفاً برای مروری بر محدودیت‌های کلیدی و پارامترهای ریسک که توسط Rubicon کنترل می‌شوند، به شرح زیر مراجعه کنید:

- **نسبت رزرو** - برای اطمینان از اینکه بازدهی بازارساز به درستی به کاربران منتقل می شود و در عین حال زمان بین ثبت (و لغو) سفارشات سپری می شود، باید حداقل نسبت ذخیره حفظ شود تا تمام نقدینگی کاربر حفظ نشود. در معرض خطر در دفتر سفارش در یک زمان معین.
- **maxOutstandingPairCount** - حداکثر تعداد سفارش‌ها (که نمی‌تواند از محدودیت‌های اندازه سفارش پویا تجاوز کند) که یک جفت می‌تواند در یک زمان معین در دفترچه سفارش داشته باشد.
- **getMaxOrderSize()** - این تابع بزرگترین اندازه سفارش ممکن را که توسط Rubicon Pools برای یک دارایی معین و استخر نقدینگی آن مجاز است، برمی گرداند.

  - **maxOrderSizeProportion** - اندازه بر حسب درصد (0 < 100) that the maximum order for a given liquidity pool can be. This is enforced on every Pools trade.
  - **Dynamic Sizing:** should the pair relationship of a quote and asset liquidity pool be over-weighted one of the assets, this function will reduce the size of orders on the lacking side of the liquidity pool.

    - For example, assume the price of ETH is $100 and bathETH contains 5 ETH while bathUSDC contains 400 USDC. _The target asset-to-quote ratio for all pairs is the current price of the asset._ In this case, the pool is overweight ETH because (400 USDC / 5 ETH) = 80 != 100 (target ratio and price) so getMaxOrderSize() will return a value that reduces the maximum order size of ETH according to the following:

    - Shape parameter = -0.005 and qt represents the delta between the target ratio and the actual asset/quote ratio that exists across the liquidity pools.

![Optimal High-Frequency Market Making; Fushimi et. al 2018](</assets/image(32).png>)

### ملاحظات کلیدی امنیتی

- **onlyApprovedStrategy** - اصلاح کننده ای که تضمین می کند نقدینگی کاربر فقط می تواند توسط استراتژی مورد تایید BathHouse استفاده شود.
- **onlyPair** - اصلاح کننده ای که نقدینگی کاربر یا یک تابع را تضمین می کند فقط توسط BathPair ثبت شده که توسط BathHouse مقداردهی اولیه شده است قابل استفاده است.
- **EnforceReserveRatio** - تضمین می کند که نسبت ذخیره موجودی دارایی پایه مخزن نقدینگی به میزان سپرده های آن رعایت و اجرا می شود.
- **enforceSpread** - تضمین می کند که یک معامله جفت استراتژیست هم اسپرد دارد (قیمت درخواستی > اسپرد غیرصفر > قیمت پیشنهادی) و هم اینکه درخواست/پیشنهاد یک تقاضا/پیشنهاد واقعی است (بیشتر از/کمتر از وسط قیمت دفترچه سفارش).
- **اجرای NoAutoFills** - تضمین می کند که معاملات جفتی که توسط استراتژیست ها انجام می شود، واقعاً سفارشات بازارساز هستند و با یک سفارش مطابقت ندارند که منجر به تکمیل خودکار پیشنهاد به عنوان معامله گیرنده می شود.