---
title: روبيكون / باث رمز أبي
description:  نظرة عامة على الكيانات الرئيسية للرسم البياني الفرعي لرمز باث ومعالجات أحداث العقد واستعلامات الأمثلة لمجموعة متنوعة من حالات الاستخدام.
---

# BathToken API

## ** الكيانات الرئيسية في BathToken **

يحتوي الرسم البياني الفرعي BathToken على مجموعة من الكيانات التي تجمع وتخزن البيانات المتعلقة بنشاط مزود السيولة واستخدام المجمع لصنع السوق في دفاتر أوامر البروتوكول. فيما يلي الكيانات الرئيسية التي نعتقد أن المستخدمين سيجدونها أكثر صلة باحتياجاتهم من البيانات.

### _**LiquidityProvider Entity (ID: Wallet Address)**_

```graphql
type LiquidityProvider @entity { 
    " <user adddress> "
    id: ID!
    " derived fields"
    positions: [PoolPosition!]! @derivedFrom(field: "liquidityProvider")
    deposits: [Deposit!]! @derivedFrom(field: "liquidityProvider")
    withdraws: [Withdraw!]! @derivedFrom(field: "liquidityProvider")
}
```

يعمل كيان LiquidityProvider كنقطة مرجعية واحدة لجمع كل الأنشطة مع تجمعات سيولة Rubicon من عنوان المحفظة. من داخل كيان LiquidityProvider ، يمكنك الوصول إلى كيانات PoolPosition والإيداع والسحب.

### _PoolPosition Entity (ID: \<user address>#\<pool underlying asset address>)_

```graphql
type PoolPosition @entity {
    " <user address>#<pool underlying asset address> "
    id: ID!
    " the liquidity provider is "
    liquidityProvider: LiquidityProvider!
    " the pool is "
    pool: Pool!
    " current bathToken balance "
    bathTokenAmount: BigInt!
    " total value of pool deposits "
    totalDeposited: BigInt!
    " total value of pool withdraws "
    totalWithdrawn: BigInt!
}
```

يمثل كيان PoolPosition الحالة النشطة لممتلكات المستخدم في تجمع سيولة Rubicon. للوصول إلى الحالة الحالية للمجمع ، بما في ذلك الحجم الإجمالي والمبلغ المستحق وسعر الحمام ، يمكن الوصول إلى كيان التجمع. يتم تصنيف جميع القيم بالقيمة الصحيحة لرمز ERC20 الأساسي الذي يمثلونه.

### Pool Entity (ID: \<pool underlying asset address>)

```graphql
type Pool @entity { 
    " <pool underlying asset address> " 
    id: ID! 
    " derived from "
    bathHouse: BathHouse!
    " pool name "
    name: String!
    " pool asset address "
    underlyingToken: String!
    " creation time "
    createdAtTimestamp: BigInt!
    " block pool was created at "
    createdAtBlockNumber: BigInt!
    " address of bath token creator "
    bathTokenCreator: String!
    " pool underlying balance (amount in pool and on books) "
    underlyingBalance: BigInt!
    " amount of pool assets outstanding on the orderbook "
    outstandingAmount: BigInt!
    " shares outstanding (BathTokens) "
    tokenSupply: BigInt!
    " total value of pool deposits "
    totalDeposited: BigInt!
    " total value of pool withdraws "
    totalWithdrawn: BigInt!
    " BathToken Price: total suppply / underlying balance "
    price: BigDecimal!
    " total earned from market making activity "
    totalEarned: BigInt!
    " daily snapshots of pool data "
    poolDayData: [PoolDayData!]! @derivedFrom(field: "pool")
    " hourly snapshots of pool data "
    poolHourData: [PoolHourData!]! @derivedFrom(field: "pool")
    " derived fields "
    deposits: [Deposit!]! @derivedFrom(field: "pool")
    withdraws: [Withdraw!]! @derivedFrom(field: "pool")
    PoolBuffers: [PoolBuffer!]! @derivedFrom(field: "pool")
}
```

يحتوي كيان تجمع السيولة على جميع المعلومات ذات الصلة فيما يتعلق بالحالة الحالية والتاريخية أو مجمع السيولة. يتم تعيين كيان التجمع للعديد من الكيانات الأخرى المرتبطة به. الكيانات الأكثر صلة التي تقوم بتعيينها هي كيانات PoolDayData و PoolHourData و PoolBuffer. يتم حساب المتغير totalEarned لكيان التجمع على النحو التالي

$$
totalEarned = basicBalance - (totalDeposited - totalWithdrawn)
$$

يحتوي كل كيان تجمع أيضًا على كيانين مرتبطين يتتبعان إحصائيات التجمع خلال فترة زمنية محددة: PoolDayData & PoolHourData. معرّفات هذين الزوجين هي كما يلي:

* PoolDayData(ID: \<pool underlying asset address>#\<timestamp rounded to current day by dividing by 86400>)
* PoolHourData(ID: \<pool underlying asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

يتم تصنيف جميع القيم بالقيمة الصحيحة لرمز ERC-20 الأساسي الذي تمثله.

### PoolBuffer Entity (ID: \<pool underlying asset address>#\<buffer asset address>)

```graphql
type PoolBuffer @entity {
    " <pool underlying asset address>#<buffer asset address> "
    id: ID!
    " the pool is"
    pool: Pool!
    " token address of asset in buffer "
    token: String!
    " name of asset in buffer "
    name: String!
    " amount of token in buffer "
    bufferAmount: BigInt!
}
```

يتوافق كيان PoolBuffer مع مبلغ أصل الأزواج الشقيقة الموجود في مجمع السيولة في انتظار إعادة التوازن. سيساعد المرئي أدناه في شرح هذه العملية وما يتوافق مع مقدار Pool Buffer.

TODO: \ * إدراج التصور من أعلى \ *

يحتوي كل كيان في PoolBuffer أيضًا على كيانين مرتبطين يتتبعان إحصائيات PoolBuffer خلال فترة زمنية محددة: PoolDayData & PoolHourData. معرّفات هذين الزوجين هي كما يلي:

* PoolBufferDay (المعرف:\<pool underlying asset address>#\<buffer asset address>#\<timestamp rounded to current day by dividing by 86400>)
* PoolBufferHour (المعرف:\<pool underlying asset address>#\<buffer asset address>#_\<timestamp rounded to current hour by dividing by 3600>_)

يتم تصنيف جميع القيم بالقيمة الصحيحة لرمز ERC-20 الأساسي الذي تمثله.

### Deposit Entity (ID: \<transaction hash>#\<user address>)

```graphql
type Deposit @entity {
    " <transaction hash>#<user address> "
    id: ID!
    " time of txn "
    timestamp: BigInt!
    " transaction details "
    transaction: Transaction!
    " pool to deposit in "
    pool: Pool!
    " amount deposited into pool "
    depositAmount: BigInt!
    " Bath Tokens received "
    bathTokenAmount: BigInt! 
    " BathToken Price: total suppply / underlying balance "
    price: BigDecimal!
    " liquidity provider "
    liquidityProvider: LiquidityProvider!
    " map to PoolDayData entity "
    poolDayData: PoolDayData!
    " map to PoolHourData entity "
    poolHourData: PoolHourData!
} 
```

يتوافق كيان الإيداع مع أي إيداع يضعه مزود السيولة في مجمعات روبيكون. يحتوي كيان الإيداع على جميع البيانات ذات الصلة بالإيداع ، مثل مبلغ الإيداع والأسهم المستلمة ، إلى جانب التعيين إلى الكيانات الأخرى ذات الصلة. يتم تصنيف جميع القيم بالقيمة الصحيحة لرمز ERC20 الأساسي الذي يمثلونه.

### Withdraw Entity (ID: \<transaction hash>#\<user address>)

```graphql
type Withdraw @entity {
    " <transaction hash>#<user address> "
    id: ID!
    " time of txn "
    timestamp: BigInt!
    " transaction details "
    transaction: Transaction!
    " pool to withdraw from "
    pool: Pool!
    " amount withdrawn from the pool "
    withdrawAmount: BigInt!
    " Bath Tokens burned "
    bathTokenBurned: BigInt! 
    " BathToken Price: total suppply / underlying balance "
    price: BigDecimal!
    " liquidity provider "
    liquidityProvider: LiquidityProvider!
    " map to PoolDayData entity "
    poolDayData: PoolDayData!
    " map to PoolHourData entity "
    poolHourData: PoolHourData!
} 
```

يتوافق كيان السحب مع أي إيداع يضعه مزود السيولة في مجمعات روبيكون. يحتوي كيان السحب على جميع البيانات ذات الصلة بالإيداع ، مثل مبلغ السحب والأسهم المستلمة ، جنبًا إلى جنب مع الكيانات الأخرى ذات الصلة. يتم تصنيف جميع القيم بالقيمة الصحيحة لرمز ERC20 الأساسي الذي يمثلونه.

## _ ** أمثلة للاستعلامات ** _

الاستعلامات التالية هي بعض سيناريوهات حالة الاستخدام الشائعة لاحتياجات البيانات المحتملة المتعلقة بالرسم البياني الفرعي BathToken.

| Use Case                                               | Subgraph Studio Example                                                                                                                  |
| ------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------- |
| Access a User's liquidity pool positions               | [Pool Positions](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=liquidityProviders)                      |
| Check on the current statistics of the liquidity pools | [Current Pool Statistics](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools)                          |
| Load in the historical pools data                      | [Historical Pools Data](https://thegraph.com/hosted-service/subgraph/denverbaumgartner/bathtoken?query=Pools%20Historical%20Performance) |